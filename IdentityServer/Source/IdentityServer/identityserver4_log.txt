2019-02-13 20:02:50.341 +01:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-13 20:02:50.385 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-13 20:02:50.966 +01:00 [DBG] Starting grant removal
2019-02-13 20:02:51.449 +01:00 [DBG] Login Url: /Account/Login
2019-02-13 20:02:51.454 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 20:02:51.454 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-13 20:02:51.455 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-13 20:02:51.455 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 20:02:51.455 +01:00 [DBG] Error Url: /home/error
2019-02-13 20:02:51.455 +01:00 [DBG] Error Id Parameter: errorId
2019-02-13 20:03:16.205 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 20:03:16.212 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 20:03:16.213 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 20:03:16.218 +01:00 [DBG] Start discovery request
2019-02-13 20:03:17.921 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 20:03:20.431 +01:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-02-13 20:04:02.099 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:02.288 +01:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"88421113","DisplayName":"bob","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKHSND0GFCN:00000006","TimeStamp":"2019-02-13T19:04:02.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-13 20:04:02.313 +01:00 [DBG] Augmenting SignInContext
2019-02-13 20:04:02.317 +01:00 [DBG] Adding idp claim with value: local
2019-02-13 20:04:02.318 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-13 20:04:02.334 +01:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-13 20:04:02.506 +01:00 [DBG] 0 persisted grants found for 88421113
2019-02-13 20:04:15.889 +01:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:15.966 +01:00 [INF] AuthenticationScheme: idsrv signed out.
2019-02-13 20:04:15.968 +01:00 [INF] {"SubjectId":"88421113","DisplayName":"bob","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKHSND0GFCP:0000000B","TimeStamp":"2019-02-13T19:04:15.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-13 20:04:25.831 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:25.869 +01:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKHSND0GFCP:0000000D","TimeStamp":"2019-02-13T19:04:25.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-13 20:04:25.870 +01:00 [DBG] Augmenting SignInContext
2019-02-13 20:04:25.870 +01:00 [DBG] Adding idp claim with value: local
2019-02-13 20:04:25.870 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-13 20:04:25.871 +01:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-13 20:04:30.449 +01:00 [DBG] 0 persisted grants found for 818727
2019-02-13 20:30:41.578 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 20:30:41.626 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 20:30:41.979 +01:00 [DBG] Starting grant removal
2019-02-13 20:30:42.333 +01:00 [DBG] Login Url: /Account/Login
2019-02-13 20:30:42.336 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 20:30:42.336 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-13 20:30:42.336 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-13 20:30:42.337 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 20:30:42.337 +01:00 [DBG] Error Url: /home/error
2019-02-13 20:30:42.337 +01:00 [DBG] Error Id Parameter: errorId
2019-02-13 20:30:46.720 +01:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-02-17 20:35:13.518 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-17 20:35:13.558 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-17 20:35:13.788 +01:00 [DBG] Starting grant removal
2019-02-17 20:35:14.040 +01:00 [DBG] Login Url: /Account/Login
2019-02-17 20:35:14.043 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-17 20:35:14.043 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-17 20:35:14.043 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-17 20:35:14.043 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-17 20:35:14.043 +01:00 [DBG] Error Url: /home/error
2019-02-17 20:35:14.043 +01:00 [DBG] Error Id Parameter: errorId
2019-02-17 20:39:06.612 +01:00 [WRN] User ae8e3d75-6906-4d20-8fbc-ecb3b20468c6 password validation failed: PasswordTooShort;PasswordRequiresNonAlphanumeric;PasswordRequiresDigit.
2019-02-17 20:53:28.833 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-17 20:53:28.900 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-17 20:53:28.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-17 20:53:28.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-17 20:53:28.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-17 20:53:28.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-17 20:53:29.252 +01:00 [DBG] Starting grant removal
2019-02-17 20:53:29.766 +01:00 [DBG] Login Url: /Account/Login
2019-02-17 20:53:29.773 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-17 20:53:29.773 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-17 20:53:29.773 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-17 20:53:29.773 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-17 20:53:29.773 +01:00 [DBG] Error Url: /home/error
2019-02-17 20:53:29.773 +01:00 [DBG] Error Id Parameter: errorId
2019-02-17 21:05:47.705 +01:00 [DBG] Stopping grant removal
2019-02-17 21:05:47.860 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:16:30.784 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:16:30.859 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:16:30.859 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:16:31.371 +01:00 [DBG] Starting grant removal
2019-02-18 22:16:31.813 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:16:31.818 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:16:31.818 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:16:31.818 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:16:31.819 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:16:31.819 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:16:31.819 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:18:40.484 +01:00 [DBG] Stopping grant removal
2019-02-18 22:18:40.628 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:23:25.838 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:23:25.910 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:23:25.910 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:23:26.293 +01:00 [DBG] Starting grant removal
2019-02-18 22:23:26.800 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:23:26.805 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:23:26.805 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:23:26.805 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:23:26.805 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:23:26.805 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:23:26.805 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:23:35.991 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-18 22:23:36.016 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-18 22:23:36.016 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-18 22:23:36.027 +01:00 [DBG] Start discovery request
2019-02-18 22:23:38.477 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-18 22:23:38.813 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-18 22:23:38.816 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-18 22:23:38.816 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-18 22:23:38.825 +01:00 [DBG] Start key discovery request
2019-02-18 22:23:38.947 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:23:38.952 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:23:38.952 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:23:38.958 +01:00 [DBG] Start authorize request
2019-02-18 22:23:38.973 +01:00 [DBG] No user present in authorize request
2019-02-18 22:23:38.980 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:23:39.582 +01:00 [DBG] mvc found in database: true
2019-02-18 22:23:39.597 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:23:39.621 +01:00 [ERR] Invalid redirect_uri: http://localhost/Client/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861218189211222.ZjBlMmMzMGEtOTE5ZS00ZmI1LWEwOGUtY2ZjZTVhOGQzNmM1ZTdiNTllMTgtNTI5Ni00MzUyLWJhOTMtMmNhODA2ZjQ1ODNm","state":"CfDJ8FEe6epQUxdNrMN2g6RdU7tPrrwhusFCvSqckevjCof7VP5sqBEypf1hT_uLueyU2jSL-3XOyQk3Ybi6qgrh6UDB9AJOS77Hd3vdxYumzlQW0k5iJmU_jEWhOWMhQtQBvSChJYII3rTDyifl27_0ddHJ3o4sYsxx4eolXbQ-Jtd6w0Pq7otdF3AGxe2SZMckAv_fmXGPwwjN_HHFJzrWXNTFpn8J-lUvVWHd1utX6chD289-mA2mhZ251qsqBDf73cecH2bUgPMEcbpiU9YdCxHS8F7WHzyZ_q08Ms_7a3R_PfG-jztG-k5O6WVGFTatsg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:23:39.632 +01:00 [ERR] Request validation failed
2019-02-18 22:23:39.632 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861218189211222.ZjBlMmMzMGEtOTE5ZS00ZmI1LWEwOGUtY2ZjZTVhOGQzNmM1ZTdiNTllMTgtNTI5Ni00MzUyLWJhOTMtMmNhODA2ZjQ1ODNm","state":"CfDJ8FEe6epQUxdNrMN2g6RdU7tPrrwhusFCvSqckevjCof7VP5sqBEypf1hT_uLueyU2jSL-3XOyQk3Ybi6qgrh6UDB9AJOS77Hd3vdxYumzlQW0k5iJmU_jEWhOWMhQtQBvSChJYII3rTDyifl27_0ddHJ3o4sYsxx4eolXbQ-Jtd6w0Pq7otdF3AGxe2SZMckAv_fmXGPwwjN_HHFJzrWXNTFpn8J-lUvVWHd1utX6chD289-mA2mhZ251qsqBDf73cecH2bUgPMEcbpiU9YdCxHS8F7WHzyZ_q08Ms_7a3R_PfG-jztG-k5O6WVGFTatsg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:23:39.693 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLST8VSQOE:00000002","TimeStamp":"2019-02-18T21:23:39.0000000Z","ProcessId":15300,"LocalIpAddress":"127.0.0.1:26654","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:24:37.994 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:24:38.042 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:24:38.042 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:24:38.292 +01:00 [DBG] Starting grant removal
2019-02-18 22:24:41.864 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:24:41.882 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:24:41.926 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:24:41.960 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:24:41.969 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:24:41.972 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:24:41.974 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:25:29.720 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-18 22:25:29.765 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-18 22:25:29.780 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-18 22:25:29.808 +01:00 [DBG] Start discovery request
2019-02-18 22:25:31.985 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-18 22:25:32.327 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-18 22:25:32.332 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-18 22:25:32.334 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-18 22:25:32.353 +01:00 [DBG] Start key discovery request
2019-02-18 22:25:32.587 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:25:32.603 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:25:32.605 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:25:32.633 +01:00 [DBG] Start authorize request
2019-02-18 22:25:32.663 +01:00 [DBG] No user present in authorize request
2019-02-18 22:25:32.694 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:25:33.407 +01:00 [DBG] mvc found in database: true
2019-02-18 22:25:33.421 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:25:33.444 +01:00 [ERR] Invalid redirect_uri: http://localhost/Client/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861219324833690.NTM5ODVhMTgtMTE4YS00YmQ1LTg3MjctMDM0MzQzYWU2NTZiYTZhODlkMDItYmUzZi00NjA5LWE1YTYtYmI5NmFmOGYxMGNh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIxh0Ps2N0jplGkeXgAu-hosJo2yoQEou4euenenZhlTHjV2_dcFcOBWC21mcRNd61QCgQhmJZOXHEGo_jjr2cA7kaMACu5dlKlyH19hZOAeeWWK3vOaIQfXBWVnc4KMJ-QlHkO7fIu01Du48POoY8nyz8xxAbg3_X6OYbWxYUel6kM6tPjj4G9X_Y2pSFYMbKoVQfY5KN8cCffeV1f6ZQCZ9vLYXXClU6FbEAIZo6xMzJCoc8JcTr2flcckbCttfxlyZyGZx8g3q2zaRuyvQ4QZo_HJSH0q_u9dV4SCJmiedw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:25:33.485 +01:00 [ERR] Request validation failed
2019-02-18 22:25:33.486 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861219324833690.NTM5ODVhMTgtMTE4YS00YmQ1LTg3MjctMDM0MzQzYWU2NTZiYTZhODlkMDItYmUzZi00NjA5LWE1YTYtYmI5NmFmOGYxMGNh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIxh0Ps2N0jplGkeXgAu-hosJo2yoQEou4euenenZhlTHjV2_dcFcOBWC21mcRNd61QCgQhmJZOXHEGo_jjr2cA7kaMACu5dlKlyH19hZOAeeWWK3vOaIQfXBWVnc4KMJ-QlHkO7fIu01Du48POoY8nyz8xxAbg3_X6OYbWxYUel6kM6tPjj4G9X_Y2pSFYMbKoVQfY5KN8cCffeV1f6ZQCZ9vLYXXClU6FbEAIZo6xMzJCoc8JcTr2flcckbCttfxlyZyGZx8g3q2zaRuyvQ4QZo_HJSH0q_u9dV4SCJmiedw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:25:33.531 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLSTUGGPRT:00000001","TimeStamp":"2019-02-18T21:25:33.0000000Z","ProcessId":20408,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:28:08.843 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:28:08.899 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:28:08.900 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:28:08.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:28:08.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:28:08.903 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:28:09.394 +01:00 [DBG] Starting grant removal
2019-02-18 22:28:12.097 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:28:12.104 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:28:12.105 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:28:12.106 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:28:12.108 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:28:12.109 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:28:12.110 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:28:21.389 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:28:21.482 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:28:21.509 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:28:21.533 +01:00 [DBG] Start authorize request
2019-02-18 22:28:21.576 +01:00 [DBG] No user present in authorize request
2019-02-18 22:28:21.649 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:28:25.402 +01:00 [DBG] mvc found in database: true
2019-02-18 22:28:25.430 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:28:25.463 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:28:25.469 +01:00 [DBG] No PKCE used.
2019-02-18 22:28:25.661 +01:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-18 22:28:26.013 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:28:26.030 +01:00 [ERR] Invalid scope: role
2019-02-18 22:28:26.039 +01:00 [ERR] Request validation failed
2019-02-18 22:28:26.068 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIyupxccr5zeicD964T8SNmetiGuT1JazHxMoYyyNBWAOnfjNd37C8Pm1S7MNODimvk3IClofAiXD9qg10Z30XEGaFPIdjEydYEutr0cEk0CflnO6dhTn8VFDsdRjoPo7V4NsHmS0IUaajS0KeNjbGi8CACMSgz563COswcyyfozx4zYtU5-kMVrG--dRSypJsxZpA46XZY74hZmyzbDrQlbZD2pO654CnAq2fGvzYSBQF1c71G7EthtQlsSj_JHArxAPueNnrBZ4AMOTKku_Q1h5BKL4lzhWna6wMCv78Frrg","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861221012567129.ODA2NzA2OTQtY2RjOC00NzA4LWJlZGQtYmMwMjg1ZTIxYTlmNDQ2YTM1NTItMzY0YS00OTczLTgwOTYtYmQxNzFhMDg2OTcy","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIyupxccr5zeicD964T8SNmetiGuT1JazHxMoYyyNBWAOnfjNd37C8Pm1S7MNODimvk3IClofAiXD9qg10Z30XEGaFPIdjEydYEutr0cEk0CflnO6dhTn8VFDsdRjoPo7V4NsHmS0IUaajS0KeNjbGi8CACMSgz563COswcyyfozx4zYtU5-kMVrG--dRSypJsxZpA46XZY74hZmyzbDrQlbZD2pO654CnAq2fGvzYSBQF1c71G7EthtQlsSj_JHArxAPueNnrBZ4AMOTKku_Q1h5BKL4lzhWna6wMCv78Frrg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:28:26.132 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile role offline_access api1","GrantType":"hybrid","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLSVTC75QN:00000001","TimeStamp":"2019-02-18T21:28:26.0000000Z","ProcessId":9436,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:29:30.497 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:29:31.337 +01:00 [DBG] Stopping grant removal
2019-02-18 22:33:35.061 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:33:35.099 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:33:35.099 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:33:35.335 +01:00 [DBG] Starting grant removal
2019-02-18 22:33:38.114 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:33:38.121 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:33:38.122 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:33:38.123 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:33:38.127 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:33:38.129 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:33:38.130 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:34:04.718 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:34:04.777 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:34:04.788 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:34:04.808 +01:00 [DBG] Start authorize request
2019-02-18 22:34:04.828 +01:00 [DBG] No user present in authorize request
2019-02-18 22:34:04.863 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:34:08.189 +01:00 [DBG] mvc found in database: true
2019-02-18 22:34:08.234 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:34:08.261 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:34:08.268 +01:00 [DBG] No PKCE used.
2019-02-18 22:34:08.454 +01:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-18 22:34:08.936 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:34:08.958 +01:00 [ERR] Invalid scope: role
2019-02-18 22:34:08.967 +01:00 [ERR] Request validation failed
2019-02-18 22:34:08.999 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIzZEFXVurHH5CsGow3cpmz1Y_UOxsnTFb8wA_mUczQu3Bq4V5bvv3ehlPsgdbc8c-Y41iWAuODGyLJ5JS0Ev__nG9wlmKsZNG57DQIe6m4-1NIUytqZZIYV9gREqc0jwDy7OSuBgyduieG-8k4CsZygW1dL6LsKhtHEMSNqHB-HGbQVghc3lu1tqoKXsRlVuRU0OR4Yv3my80hGso7L30-cYKhOjx0flCyIDJgVAqypY1Z2FdaiQEIyBMHM_tBAIWq7HpsLKJdjx7dcADkdb4BegMeLVRrSXC_efOVGBimbPQ","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861224446658405.OGU2YzZkMjctY2U4Yi00MzU3LWJhODgtYTU1NTdhZTFjY2EwNmMwY2U3MTUtYTUxYi00YzdiLTg3OWUtMDg0YTZhNDM2MzZi","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIzZEFXVurHH5CsGow3cpmz1Y_UOxsnTFb8wA_mUczQu3Bq4V5bvv3ehlPsgdbc8c-Y41iWAuODGyLJ5JS0Ev__nG9wlmKsZNG57DQIe6m4-1NIUytqZZIYV9gREqc0jwDy7OSuBgyduieG-8k4CsZygW1dL6LsKhtHEMSNqHB-HGbQVghc3lu1tqoKXsRlVuRU0OR4Yv3my80hGso7L30-cYKhOjx0flCyIDJgVAqypY1Z2FdaiQEIyBMHM_tBAIWq7HpsLKJdjx7dcADkdb4BegMeLVRrSXC_efOVGBimbPQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:34:09.130 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile role offline_access api1","GrantType":"hybrid","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLT2UG6JJF:00000001","TimeStamp":"2019-02-18T21:34:09.0000000Z","ProcessId":14004,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:36:13.318 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:36:14.330 +01:00 [DBG] Stopping grant removal
2019-02-18 22:42:03.394 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:42:03.457 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:42:03.458 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:42:03.756 +01:00 [DBG] Starting grant removal
2019-02-18 22:42:06.547 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:42:06.555 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:42:06.556 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:42:06.557 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:42:06.558 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:42:06.559 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:42:06.562 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:42:17.195 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:42:17.275 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:42:17.303 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:42:17.329 +01:00 [DBG] Start authorize request
2019-02-18 22:42:17.385 +01:00 [DBG] No user present in authorize request
2019-02-18 22:42:17.445 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:20.970 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:20.987 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:20.998 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:21.001 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:21.126 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.448 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.481 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.492 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.520 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:21.544 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIylk0lz6CVVGyUDpZ_5bPn6e7A3u9PvN8ytD-CZ-RDGLIumI00-7VNtOTtuInYiClQUKf8_uo0-XCjvwKrLGL14VBRMa5TgxyYWuUyaESj4u2DpvdgieeL0Ry55wCrjmY-KUtzT4id8QM7nwSNqRr4P6lXHv4uoxqZEFu9NpADLUbR0HewPbk1XPFgphmMsi3VoHsPjmsfS3Qo4s5rqSuWhymUcjfK6btYpuDU1qxDXzm5hCMiJ0F1Qs5nQzBmKkXhGHHyBszHyrhXrwyaAEhctKIioy6dnyNxSFE48od1fxg","UiLocales":null,"Nonce":"636861229371034608.Y2M2ZTQ0OWYtMmE4NS00MmEwLTgxMzEtNDY5MGNiYTRmODliZDlkZTQ3NzQtMGVjMS00ZmM0LWJjZDgtYWJmZDM0MDk0OWRh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861229371034608.Y2M2ZTQ0OWYtMmE4NS00MmEwLTgxMzEtNDY5MGNiYTRmODliZDlkZTQ3NzQtMGVjMS00ZmM0LWJjZDgtYWJmZDM0MDk0OWRh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIylk0lz6CVVGyUDpZ_5bPn6e7A3u9PvN8ytD-CZ-RDGLIumI00-7VNtOTtuInYiClQUKf8_uo0-XCjvwKrLGL14VBRMa5TgxyYWuUyaESj4u2DpvdgieeL0Ry55wCrjmY-KUtzT4id8QM7nwSNqRr4P6lXHv4uoxqZEFu9NpADLUbR0HewPbk1XPFgphmMsi3VoHsPjmsfS3Qo4s5rqSuWhymUcjfK6btYpuDU1qxDXzm5hCMiJ0F1Qs5nQzBmKkXhGHHyBszHyrhXrwyaAEhctKIioy6dnyNxSFE48od1fxg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:42:21.588 +01:00 [INF] Showing login: User is not authenticated
2019-02-18 22:42:21.818 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:21.835 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:21.837 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:21.842 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:21.843 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:21.857 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.876 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.884 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.907 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.910 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:21.929 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:21.930 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.134 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-18 22:42:47.234 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:47.243 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.243 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.248 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:47.249 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:47.253 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.261 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.268 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.277 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.278 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:47.322 +01:00 [INF] {"Username":"Admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKLT7LUTV8B:00000002","TimeStamp":"2019-02-18T21:42:47.0000000Z","ProcessId":18644,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-18 22:42:47.331 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:47.339 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.339 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.341 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:47.342 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:47.356 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.361 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.369 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.375 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.377 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:47.391 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.392 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.680 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-18 22:43:01.728 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:43:01.735 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.735 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.737 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:43:01.738 +01:00 [DBG] No PKCE used.
2019-02-18 22:43:01.748 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.764 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.769 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.774 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.775 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:43:01.779 +01:00 [INF] {"Username":"Admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKLT7LUTV8D:00000003","TimeStamp":"2019-02-18T21:43:01.0000000Z","ProcessId":18644,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-18 22:43:01.789 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:43:01.799 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.799 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.802 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:43:01.804 +01:00 [DBG] No PKCE used.
2019-02-18 22:43:01.812 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.817 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.823 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.828 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.832 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:43:01.839 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.840 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 23:42:03.819 +01:00 [INF] Removing 0 grants
2019-02-19 00:42:03.834 +01:00 [INF] Removing 0 grants
2019-02-19 01:42:03.836 +01:00 [INF] Removing 0 grants
2019-02-19 02:42:03.853 +01:00 [INF] Removing 0 grants
2019-02-19 03:42:03.862 +01:00 [INF] Removing 0 grants
2019-02-19 04:42:03.866 +01:00 [INF] Removing 0 grants
2019-02-19 05:42:03.868 +01:00 [INF] Removing 0 grants
2019-02-19 06:42:03.871 +01:00 [INF] Removing 0 grants
2019-02-19 07:42:03.875 +01:00 [INF] Removing 0 grants
2019-02-19 07:50:44.603 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 07:50:44.673 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 07:50:44.674 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 07:50:44.675 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 07:50:44.675 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 07:50:44.676 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 07:50:44.921 +01:00 [DBG] Starting grant removal
2019-02-19 07:50:47.732 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 07:50:47.737 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 07:50:47.738 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 07:50:47.739 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 07:50:47.741 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 07:50:47.742 +01:00 [DBG] Error Url: /home/error
2019-02-19 07:50:47.747 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 07:51:05.333 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 07:51:05.376 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 07:51:05.380 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 07:51:05.389 +01:00 [DBG] Start discovery request
2019-02-19 07:51:07.591 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 07:51:08.058 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 07:51:08.064 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 07:51:08.066 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 07:51:08.079 +01:00 [DBG] Start key discovery request
2019-02-19 07:51:08.348 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 07:51:08.365 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 07:51:08.367 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 07:51:08.381 +01:00 [DBG] Start authorize request
2019-02-19 07:51:08.401 +01:00 [DBG] No user present in authorize request
2019-02-19 07:51:08.413 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:09.091 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.113 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:09.125 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:09.130 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:09.229 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.359 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.370 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.413 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:09.449 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG8I0fBz2mizl8Gn62oxOM0DS8gTYrlGD1WhiO36xU_gpF1D2F5ZoyAPpW0Gd2mWaSG8xIYXh3ei1u5lnnEG0GuXNXO-Dn7w7iFyMqoeh4a-8Ifk2fuWuxGzQzMumRsPiSKksh8JlljIorYO51rAecedAF_Zp9Ii95OyEdl4gt33F83wSzjggrUqxPp8fFBqk-SPoziBjZ33tAxPISx6dtGLVdPRkH-_G7_PeJ-9gqZUaqglV57rGXH4tHRpTbGvrQzt2K9xT36QCjZSGPLAWZ9-79Kj-9f3QVRDcYgrTdqSQ","UiLocales":null,"Nonce":"636861558682167260.Y2YyYzllZDMtY2Q0OC00MGFhLTk3NjYtZGI0MmFlOWNhYTEyYzJjNDcyOWUtYTAwNy00NzllLWE1MGEtNjYyODBiMzNiOWUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861558682167260.Y2YyYzllZDMtY2Q0OC00MGFhLTk3NjYtZGI0MmFlOWNhYTEyYzJjNDcyOWUtYTAwNy00NzllLWE1MGEtNjYyODBiMzNiOWUx","state":"CfDJ8BIGocXdesZEnSaNciO7zeG8I0fBz2mizl8Gn62oxOM0DS8gTYrlGD1WhiO36xU_gpF1D2F5ZoyAPpW0Gd2mWaSG8xIYXh3ei1u5lnnEG0GuXNXO-Dn7w7iFyMqoeh4a-8Ifk2fuWuxGzQzMumRsPiSKksh8JlljIorYO51rAecedAF_Zp9Ii95OyEdl4gt33F83wSzjggrUqxPp8fFBqk-SPoziBjZ33tAxPISx6dtGLVdPRkH-_G7_PeJ-9gqZUaqglV57rGXH4tHRpTbGvrQzt2K9xT36QCjZSGPLAWZ9-79Kj-9f3QVRDcYgrTdqSQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 07:51:09.529 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 07:51:09.721 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:09.732 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.732 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:09.736 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:09.737 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:09.743 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.754 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.760 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.770 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.773 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:09.789 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.790 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:20.885 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 07:51:20.992 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:21.003 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.004 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:21.009 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:21.010 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:21.018 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.035 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.046 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.056 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.057 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:21.107 +01:00 [INF] {"Username":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKM6Q98N8TE:00000002","TimeStamp":"2019-02-19T06:51:21.0000000Z","ProcessId":8180,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-19 07:51:21.114 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:21.120 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.130 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:21.132 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:21.133 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:21.143 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.156 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.173 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.183 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.186 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:21.198 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.203 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:59:17.386 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 07:59:26.847 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:59:26.888 +01:00 [DBG] mvc found in database: true
2019-02-19 07:59:26.888 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:59:26.892 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:59:26.893 +01:00 [DBG] No PKCE used.
2019-02-19 07:59:26.897 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:59:26.912 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:59:26.923 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:59:26.931 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:59:26.952 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:00:02.247 +01:00 [INF] {"Username":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKM6Q98N8TH:00000001","TimeStamp":"2019-02-19T07:00:02.0000000Z","ProcessId":8180,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-19 08:00:02.254 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:00:02.275 +01:00 [DBG] mvc found in database: true
2019-02-19 08:00:02.276 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:00:02.296 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:00:02.298 +01:00 [DBG] No PKCE used.
2019-02-19 08:00:02.305 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:00:02.313 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:00:02.345 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:00:02.351 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:00:02.355 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:00:02.362 +01:00 [DBG] mvc found in database: true
2019-02-19 08:00:02.363 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:07:54.383 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 08:07:54.433 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 08:07:54.434 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 08:07:54.701 +01:00 [DBG] Starting grant removal
2019-02-19 08:07:58.881 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 08:07:58.891 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 08:07:58.893 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 08:07:58.894 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 08:07:58.897 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 08:07:58.899 +01:00 [DBG] Error Url: /home/error
2019-02-19 08:07:58.900 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 08:08:27.683 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 08:08:27.757 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 08:08:27.759 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 08:08:27.771 +01:00 [DBG] Start authorize request
2019-02-19 08:08:27.794 +01:00 [DBG] No user present in authorize request
2019-02-19 08:08:27.835 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:31.468 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:31.496 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:31.513 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:31.518 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:31.692 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.025 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.060 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.079 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.108 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:32.139 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:08:32.189 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 08:08:32.346 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:32.356 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:32.357 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:32.360 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:32.362 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:32.370 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.380 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.388 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.398 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.400 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:32.434 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:32.457 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:44.626 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 08:08:46.725 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:46.733 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:46.734 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:46.736 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:46.737 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:46.743 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:46.754 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:46.761 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:46.772 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:46.773 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:59.574 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKM73S7BNFB:00000002","TimeStamp":"2019-02-19T07:08:59.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 08:09:08.515 +01:00 [DBG] Augmenting SignInContext
2019-02-19 08:09:08.519 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 08:09:08.520 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 08:09:08.538 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 08:09:12.884 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:12.887 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.589 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 08:09:19.592 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 08:09:19.598 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 08:09:19.627 +01:00 [DBG] Start authorize callback request
2019-02-19 08:09:19.637 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:19.656 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:19.666 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.672 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.679 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:19.681 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:19.687 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.696 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.702 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.710 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.711 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:19.713 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f683f9d6155c08c3ad24082c3db3c973","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:09:19.794 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 08:09:19.795 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 08:09:19.891 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:19.897 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.897 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.899 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:19.901 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:19.918 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.926 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.929 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.935 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.937 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:19.943 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.944 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.949 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:19.957 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.322 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 08:09:35.386 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:35.393 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.394 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.395 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:35.407 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:35.413 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.423 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.447 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.458 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.460 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:35.464 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKM73S7BNFC:00000004","TimeStamp":"2019-02-19T07:09:35.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 08:09:35.534 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.534 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.542 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 08:09:35.545 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 08:09:35.552 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 08:09:35.554 +01:00 [DBG] Start authorize callback request
2019-02-19 08:09:35.566 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:35.567 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:35.578 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.579 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.582 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:35.583 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:35.589 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.600 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.608 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.623 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.625 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:35.628 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f683f9d6155c08c3ad24082c3db3c973","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:09:35.678 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 08:09:35.692 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 08:09:35.699 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 08:09:35.707 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:35.787 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= not found in database
2019-02-19 08:09:35.929 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 08:09:35.973 +01:00 [DBG] qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= not found in database
2019-02-19 08:09:35.994 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 08:09:36.009 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 08:09:36.017 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 08:09:36.159 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****tXOw","$type":"Token"},{"TokenType":"code","TokenValue":"****dd2d","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKM73S7BNFC:00000005","TimeStamp":"2019-02-19T07:09:36.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 08:09:36.181 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 08:09:36.212 +01:00 [DBG] Augmenting SignInContext
2019-02-19 08:09:36.214 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 08:09:36.665 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 08:09:36.677 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 08:09:36.679 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 08:09:36.694 +01:00 [DBG] Start token request.
2019-02-19 08:09:36.708 +01:00 [DBG] Start client validation
2019-02-19 08:09:36.716 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 08:09:36.726 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 08:09:36.731 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 08:09:36.732 +01:00 [DBG] Secret id found: mvc
2019-02-19 08:09:36.741 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:36.742 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:36.758 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 08:09:36.759 +01:00 [DBG] Client validation success
2019-02-19 08:09:36.760 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKM73S7BNFD:00000001","TimeStamp":"2019-02-19T07:09:36.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 08:09:36.799 +01:00 [DBG] Start token request validation
2019-02-19 08:09:36.822 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 08:09:36.848 +01:00 [DBG] qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= found in database: true
2019-02-19 08:09:36.888 +01:00 [DBG] removing qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= persisted grant from database
2019-02-19 08:09:36.935 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 08:09:36.944 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"940b59035cdb825ef2010a3607154a7457267e843c1ddc96d9156482341cdd2d","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"940b59035cdb825ef2010a3607154a7457267e843c1ddc96d9156482341cdd2d","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 08:09:37.002 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.002 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.023 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.032 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:37.058 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 08:09:37.059 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:37.352 +01:00 [DBG] Creating refresh token
2019-02-19 08:09:37.353 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 08:09:37.393 +01:00 [DBG] cvKbM4/O1OrinlufmPYYtBj+lrBsKpUR+hjmTbYoUZQ= not found in database
2019-02-19 08:09:37.420 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.421 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.429 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.440 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:37.442 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 08:09:37.444 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 08:09:37.472 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****TPtA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****b128","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FBfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKM73S7BNFD:00000001","TimeStamp":"2019-02-19T07:09:37.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 08:09:37.487 +01:00 [DBG] Token request success.
2019-02-19 08:09:37.605 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 08:09:37.611 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 08:09:37.613 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 08:09:37.625 +01:00 [DBG] Start userinfo request
2019-02-19 08:09:37.630 +01:00 [DBG] Bearer token found in header
2019-02-19 08:09:37.720 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.721 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.737 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.738 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.750 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 08:09:37.754 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550560177,"exp":1550563777,"iss":"http://localhost:3254","aud":["http://localhost:3254/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550560148,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 08:09:37.795 +01:00 [DBG] Creating userinfo response
2019-02-19 08:09:37.800 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.806 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.814 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.817 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 08:09:37.818 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.838 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.861 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 08:09:37.865 +01:00 [DBG] End userinfo request
2019-02-19 20:43:27.303 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 20:43:27.427 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 20:43:27.427 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 20:43:27.428 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 20:43:27.428 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 20:43:27.428 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 20:43:28.079 +01:00 [DBG] Starting grant removal
2019-02-19 20:43:28.609 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 20:43:28.620 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 20:43:28.620 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 20:43:28.620 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 20:43:28.620 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 20:43:28.620 +01:00 [DBG] Error Url: /home/error
2019-02-19 20:43:28.620 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 20:43:28.704 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:43:28.745 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:43:28.746 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:43:28.756 +01:00 [DBG] Start discovery request
2019-02-19 20:43:32.863 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:43:33.647 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:43:33.654 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:43:33.654 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:43:33.669 +01:00 [DBG] Start key discovery request
2019-02-19 20:43:34.060 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 20:43:34.074 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 20:43:34.074 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 20:43:34.087 +01:00 [DBG] Start authorize request
2019-02-19 20:43:34.121 +01:00 [DBG] No user present in authorize request
2019-02-19 20:43:34.135 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:43:35.480 +01:00 [DBG] mvc found in database: true
2019-02-19 20:43:35.511 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:43:35.533 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:43:35.536 +01:00 [DBG] No PKCE used.
2019-02-19 20:43:35.769 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:43:35.987 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:43:36.045 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:43:36.057 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:43:36.093 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:43:36.165 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","UiLocales":null,"Nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","state":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:44:19.464 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 20:44:19.539 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 20:44:19.540 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 20:44:19.540 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 20:44:19.540 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 20:44:19.540 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 20:44:19.988 +01:00 [DBG] Starting grant removal
2019-02-19 20:44:20.361 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 20:44:20.367 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 20:44:20.367 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 20:44:20.368 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 20:44:20.368 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 20:44:20.368 +01:00 [DBG] Error Url: /home/error
2019-02-19 20:44:20.368 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 20:44:24.160 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 20:44:24.222 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 20:44:24.222 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 20:44:24.230 +01:00 [DBG] Start authorize request
2019-02-19 20:44:24.245 +01:00 [DBG] No user present in authorize request
2019-02-19 20:44:24.266 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:26.923 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:26.949 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:26.959 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:26.966 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:27.100 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:27.540 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:27.573 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:27.585 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:27.610 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:27.640 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","UiLocales":null,"Nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","state":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:44:27.667 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 20:44:27.816 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:27.832 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:27.832 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:27.832 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:27.832 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:27.842 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:27.852 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:27.863 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:27.873 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:27.874 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:27.889 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:27.889 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:35.105 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:44:38.314 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:38.323 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:38.323 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:38.324 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:38.324 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:38.330 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:38.338 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:38.346 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:38.355 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:38.356 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:38.861 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKMKAI076O0:00000003","TimeStamp":"2019-02-19T19:44:38.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 20:44:38.921 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:44:38.926 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 20:44:38.926 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 20:44:38.951 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:44:38.958 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:38.958 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:38.984 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:44:38.986 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:44:38.986 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:44:39.000 +01:00 [DBG] Start authorize callback request
2019-02-19 20:44:39.007 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:44:39.007 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:39.019 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:39.019 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:39.020 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:39.020 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:39.031 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:39.036 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:39.044 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:39.049 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:39.049 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:39.050 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","UiLocales":null,"Nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"90583e0109a5bb1b8f031cb465c5f5e3","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","state":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:44:39.120 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:44:39.120 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 20:44:39.169 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:39.175 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:39.175 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:39.175 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:39.175 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:39.185 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:39.190 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:39.195 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:39.201 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:39.201 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:39.207 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:39.207 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:39.216 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:44:39.221 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:41.532 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:44:41.581 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:41.592 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:41.592 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:41.592 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:41.592 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:41.599 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:41.607 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:41.612 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:41.620 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:41.620 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:41.623 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKMKAI076NS:00000005","TimeStamp":"2019-02-19T19:44:41.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 20:44:41.655 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:41.655 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:41.662 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:44:41.663 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:44:41.663 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:44:41.663 +01:00 [DBG] Start authorize callback request
2019-02-19 20:44:41.673 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:44:41.673 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:44:41.683 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:41.683 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:41.683 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:44:41.683 +01:00 [DBG] No PKCE used.
2019-02-19 20:44:41.691 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:41.703 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:41.709 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:44:41.720 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:41.720 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:44:41.721 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","UiLocales":null,"Nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"90583e0109a5bb1b8f031cb465c5f5e3","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862022138388732.ZThlN2NmYzgtYWQyMS00OTVkLWIyYjctY2QyZDY4ZGM5NDhhOWYyZGFjMDYtMWMyZi00Njg4LTg5MTctMDUxOTA2NDhmOWU0","state":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:44:41.726 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:44:41.744 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 20:44:41.748 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 20:44:41.756 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:44:41.847 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= found in database
2019-02-19 20:44:42.004 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 20:44:42.074 +01:00 [DBG] 7rQKk/naMNGTUZZ8yVULUZ6pZR9+KiDZq8AwIW+Ve40= not found in database
2019-02-19 20:44:42.153 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 20:44:42.198 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:44:42.205 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:44:42.678 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****8FWw","$type":"Token"},{"TokenType":"code","TokenValue":"****688d","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O0:00000005","TimeStamp":"2019-02-19T19:44:42.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:44:42.691 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8N1R0OvfMFFOuBHoN58-oEBryEja3tG44NvFibt2IvUge0T5PO-JGa0sqAHg-TBWXjvHfQO2CfanW0XGbFaj3Y3jOYujQNk48vAMb6rC9tPbN_I18Ad5J3mVJdSnm086Kw1eADQ7VXU_RPQWVF0ltx_p7Ut0qwtWw7ospxihTS1dNjO4O1AuBZLX-UDpTjshn9vKjT_E7wroCIz37qxKYjOJSJXAvhK3RgvpdUkqdMHsljOfFpk79Rl9ubw1O1h_MaBmq-I-FyAdsQmo8WEgMhYYCcbzgwCZ_PQPPcTY0nhT6b62Jmzf6lA8WehhQkMy7Q","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 20:44:42.756 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:44:42.758 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:44:43.183 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:44:43.205 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:44:43.205 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:44:43.225 +01:00 [DBG] Start token request.
2019-02-19 20:44:43.276 +01:00 [DBG] Start client validation
2019-02-19 20:44:43.291 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:44:43.339 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 20:44:43.420 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 20:44:43.420 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:44:43.443 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:43.443 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:43.479 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:44:43.479 +01:00 [DBG] Client validation success
2019-02-19 20:44:43.528 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076NV:00000004","TimeStamp":"2019-02-19T19:44:43.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:44:43.577 +01:00 [DBG] Start token request validation
2019-02-19 20:44:43.643 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 20:44:43.733 +01:00 [DBG] 7rQKk/naMNGTUZZ8yVULUZ6pZR9+KiDZq8AwIW+Ve40= found in database: true
2019-02-19 20:44:43.846 +01:00 [DBG] removing 7rQKk/naMNGTUZZ8yVULUZ6pZR9+KiDZq8AwIW+Ve40= persisted grant from database
2019-02-19 20:44:44.176 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 20:44:44.182 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"548f5c504f37b4ee27d734949bca9ae03ca86e011ea20c339d94aee06f36688d","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"548f5c504f37b4ee27d734949bca9ae03ca86e011ea20c339d94aee06f36688d","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:44:44.296 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:44.296 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:44.311 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:44:44.340 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:44.394 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:44:44.396 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:44:44.962 +01:00 [DBG] Creating refresh token
2019-02-19 20:44:44.963 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 20:44:45.005 +01:00 [DBG] uuZVfKdBiQMD0dP/YvFlF4Iwcm8zPnqiRN4+mfKniOk= not found in database
2019-02-19 20:44:45.045 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:45.045 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:45.050 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:44:45.063 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:45.063 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:44:45.063 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:44:45.075 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****rpKA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****2a99","$type":"Token"},{"TokenType":"access_token","TokenValue":"****F2Zg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076NV:00000004","TimeStamp":"2019-02-19T19:44:45.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:44:45.078 +01:00 [DBG] Token request success.
2019-02-19 20:44:45.197 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 20:44:45.200 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 20:44:45.200 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 20:44:45.210 +01:00 [DBG] Start userinfo request
2019-02-19 20:44:45.222 +01:00 [DBG] Bearer token found in header
2019-02-19 20:44:45.359 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:45.359 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:45.379 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:45.380 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:45.387 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 20:44:45.390 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550605484,"exp":1550609084,"iss":"http://localhost/identityserver","aud":["http://localhost/identityserver/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550605478,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 20:44:45.406 +01:00 [DBG] Creating userinfo response
2019-02-19 20:44:45.412 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:44:45.417 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:44:45.424 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:44:45.425 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 20:44:45.425 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:44:45.433 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:44:45.449 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 20:44:45.450 +01:00 [DBG] End userinfo request
2019-02-19 20:44:49.703 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:44:49.705 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:44:49.705 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:44:49.715 +01:00 [DBG] Start discovery request
2019-02-19 20:44:49.900 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:44:50.001 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:44:50.002 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:44:50.003 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:44:50.015 +01:00 [DBG] Start key discovery request
2019-02-19 20:44:50.159 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:44:50.160 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:44:50.161 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:44:50.161 +01:00 [DBG] Start token request.
2019-02-19 20:44:50.161 +01:00 [DBG] Start client validation
2019-02-19 20:44:50.161 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:44:50.162 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:44:50.162 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:44:50.171 +01:00 [DBG] mvc found in database: true
2019-02-19 20:44:50.171 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:44:50.171 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:44:50.171 +01:00 [DBG] Client validation success
2019-02-19 20:44:50.171 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076NS:00000006","TimeStamp":"2019-02-19T19:44:50.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:44:50.172 +01:00 [DBG] Start token request validation
2019-02-19 20:44:50.181 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:44:50.193 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:44:50.202 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:50.207 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:44:50.220 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:44:50.220 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:44:50.221 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:44:50.231 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:44:50.239 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****gJOQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076NS:00000006","TimeStamp":"2019-02-19T19:44:50.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:44:50.239 +01:00 [DBG] Token request success.
2019-02-19 20:44:50.899 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:44:50.903 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:44:50.904 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:44:50.904 +01:00 [DBG] Start discovery request
2019-02-19 20:44:50.921 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:44:51.255 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:44:51.256 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:44:51.257 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:44:51.257 +01:00 [DBG] Start key discovery request
2019-02-19 20:45:39.978 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:45:39.979 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:45:39.979 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:45:39.979 +01:00 [DBG] Start discovery request
2019-02-19 20:45:39.990 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:45:40.056 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:45:40.057 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:45:40.057 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:45:40.057 +01:00 [DBG] Start key discovery request
2019-02-19 20:46:03.315 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:46:03.316 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:46:03.316 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:46:03.316 +01:00 [DBG] Start token request.
2019-02-19 20:46:03.316 +01:00 [DBG] Start client validation
2019-02-19 20:46:03.316 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:46:03.316 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:46:03.316 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:46:03.326 +01:00 [DBG] mvc found in database: true
2019-02-19 20:46:03.326 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:46:03.326 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:46:03.327 +01:00 [DBG] Client validation success
2019-02-19 20:46:03.327 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076NU:00000007","TimeStamp":"2019-02-19T19:46:03.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:46:03.327 +01:00 [DBG] Start token request validation
2019-02-19 20:46:03.327 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:46:03.349 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:46:03.388 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:46:03.392 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:46:03.399 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:46:03.399 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:46:03.399 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:46:03.399 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:46:03.407 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****_Rmg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076NU:00000007","TimeStamp":"2019-02-19T19:46:03.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:46:03.408 +01:00 [DBG] Token request success.
2019-02-19 20:50:50.971 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:50:50.972 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:50:50.972 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:50:50.972 +01:00 [DBG] Start discovery request
2019-02-19 20:50:50.984 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:50:50.985 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:50:50.986 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:50:50.986 +01:00 [DBG] Start discovery request
2019-02-19 20:50:51.047 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:50:51.056 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:50:51.225 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:50:51.234 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:50:51.234 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:50:51.235 +01:00 [DBG] Start key discovery request
2019-02-19 20:50:51.267 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:50:51.268 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:50:51.268 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:50:51.268 +01:00 [DBG] Start key discovery request
2019-02-19 20:50:56.291 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:50:56.292 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:50:56.292 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:50:56.292 +01:00 [DBG] Start token request.
2019-02-19 20:50:56.293 +01:00 [DBG] Start client validation
2019-02-19 20:50:56.293 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:50:56.293 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:50:56.293 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:50:56.294 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:50:56.295 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:50:56.295 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:50:56.295 +01:00 [DBG] Start token request.
2019-02-19 20:50:56.295 +01:00 [DBG] Start client validation
2019-02-19 20:50:56.295 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:50:56.295 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:50:56.295 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:50:56.302 +01:00 [DBG] mvc found in database: true
2019-02-19 20:50:56.303 +01:00 [DBG] mvc found in database: true
2019-02-19 20:50:56.303 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:50:56.303 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:50:56.303 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:50:56.303 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:50:56.303 +01:00 [DBG] Client validation success
2019-02-19 20:50:56.303 +01:00 [DBG] Client validation success
2019-02-19 20:50:56.303 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076O2:00000003","TimeStamp":"2019-02-19T19:50:56.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:50:56.303 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076O1:00000003","TimeStamp":"2019-02-19T19:50:56.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:50:56.307 +01:00 [DBG] Start token request validation
2019-02-19 20:50:56.305 +01:00 [DBG] Start token request validation
2019-02-19 20:50:56.307 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:50:56.307 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:50:56.311 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:50:56.311 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:50:56.320 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:50:56.321 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:50:56.323 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:50:56.324 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:50:56.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:50:56.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:50:56.333 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:50:56.333 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:50:56.333 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:50:56.333 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:50:56.333 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:50:56.333 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:50:56.341 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****VohA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O1:00000003","TimeStamp":"2019-02-19T19:50:56.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:50:56.341 +01:00 [DBG] Token request success.
2019-02-19 20:50:56.341 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****VohA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O2:00000003","TimeStamp":"2019-02-19T19:50:56.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:50:56.342 +01:00 [DBG] Token request success.
2019-02-19 20:50:57.217 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:50:57.221 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:50:57.221 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:50:57.221 +01:00 [DBG] Start discovery request
2019-02-19 20:50:57.240 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:50:58.013 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:50:58.013 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:50:58.014 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:50:58.014 +01:00 [DBG] Start key discovery request
2019-02-19 20:51:29.454 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:51:29.460 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:51:29.463 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:51:29.463 +01:00 [DBG] Start discovery request
2019-02-19 20:51:29.480 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:51:29.964 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:51:29.965 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:51:29.965 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:51:29.966 +01:00 [DBG] Start key discovery request
2019-02-19 20:51:30.245 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 20:51:30.247 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 20:51:30.248 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 20:51:30.248 +01:00 [DBG] Start authorize request
2019-02-19 20:51:30.248 +01:00 [DBG] No user present in authorize request
2019-02-19 20:51:30.248 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:30.268 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:30.268 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:30.268 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:30.268 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:30.277 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:30.295 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:30.373 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:30.381 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:30.382 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:30.383 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","UiLocales":null,"Nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","state":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:51:30.384 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 20:51:30.653 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:30.662 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:30.662 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:30.662 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:30.662 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:30.672 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:30.682 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:30.687 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:30.699 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:30.700 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:30.709 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:30.709 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:38.028 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:51:38.286 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:38.293 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:38.294 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:38.294 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:38.294 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:38.309 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:38.317 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:38.325 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:38.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:38.333 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:38.362 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKMKAI076O2:00000008","TimeStamp":"2019-02-19T19:51:38.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 20:51:38.362 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:51:38.362 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 20:51:38.362 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 20:51:38.363 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:51:38.372 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:38.372 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:38.386 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:51:38.387 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:51:38.387 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:51:38.387 +01:00 [DBG] Start authorize callback request
2019-02-19 20:51:38.387 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:51:38.387 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:38.392 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:38.392 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:38.393 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:38.393 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:38.400 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:38.406 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:38.410 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:39.443 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:39.443 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:39.444 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","UiLocales":null,"Nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1b9cc0be95320b3b100989eda57646f7","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","state":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:51:39.448 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:51:39.448 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 20:51:39.528 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:39.538 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:39.540 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:39.541 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:39.541 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:39.548 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:39.558 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:39.565 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:39.573 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:39.573 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:39.582 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:39.582 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:39.589 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:51:39.596 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:41.497 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:51:41.566 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:41.574 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:41.574 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:41.574 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:41.575 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:41.588 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:41.599 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:41.610 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:41.621 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:41.621 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:41.622 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKMKAI076O2:0000000A","TimeStamp":"2019-02-19T19:51:41.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 20:51:41.629 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:41.629 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:41.672 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:51:41.673 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:51:41.673 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:51:41.673 +01:00 [DBG] Start authorize callback request
2019-02-19 20:51:41.673 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:51:41.674 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:51:41.683 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:41.684 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:41.684 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:51:41.684 +01:00 [DBG] No PKCE used.
2019-02-19 20:51:41.689 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:41.697 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:41.706 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:51:41.716 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:41.716 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:51:41.717 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","UiLocales":null,"Nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"1b9cc0be95320b3b100989eda57646f7","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862026900671703.YmMwMTYzMzUtZmVlZi00M2NkLTk4OTUtMGNmYTVkYjc3MDEyYTM3YzZlZDktN2UyNy00Y2ZmLTlmY2QtYzFkNmE0Mzg4YmU1","state":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:51:42.454 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:51:42.455 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 20:51:42.455 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 20:51:42.455 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:51:42.465 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= found in database
2019-02-19 20:51:42.511 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 20:51:42.546 +01:00 [DBG] GcEB5xsqeFzCqvKBuAXL9G2haoPbxCVqRwrku0drm14= not found in database
2019-02-19 20:51:42.595 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 20:51:42.596 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:51:42.596 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:51:42.607 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****CX-g","$type":"Token"},{"TokenType":"code","TokenValue":"****ff66","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O4:00000003","TimeStamp":"2019-02-19T19:51:42.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:51:42.607 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8I0MQvTudVxLkdwPhe5KNmZuUMkXWERiIP5XjeCt36ONkCBN-IujD94u_Z_bhnUsJy0zA5FnCEtlOQwd3vZG4BrFE8VAKrZkYebFZG6OEvlScSdC8oDmWt9J2vGMo6qZdmtRCl1cKdyozLxf6buhjlN46GlLgJUmoZEykLqikkBOvcVVhaNnLCxlGK9SIFFVJguIqYK0he9XSDD2QxoWDxUnV8uOeQJxgc9dLhnEYgsp4UfeRHhuw96NGui3k4A_An3tN0DuhveEKUVKpyCEMsF6TrYohJQzbdg24pBWcNX69FSt3EAeZFuksMfHA1UC0w","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 20:51:42.608 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:51:42.608 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:51:43.184 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:51:43.186 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:51:43.186 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:51:43.186 +01:00 [DBG] Start token request.
2019-02-19 20:51:43.186 +01:00 [DBG] Start client validation
2019-02-19 20:51:43.186 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:51:43.187 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 20:51:43.213 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 20:51:43.214 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:51:43.267 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:43.267 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:43.268 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:51:43.268 +01:00 [DBG] Client validation success
2019-02-19 20:51:43.268 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076O3:00000003","TimeStamp":"2019-02-19T19:51:43.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:51:43.273 +01:00 [DBG] Start token request validation
2019-02-19 20:51:43.274 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 20:51:43.277 +01:00 [DBG] GcEB5xsqeFzCqvKBuAXL9G2haoPbxCVqRwrku0drm14= found in database: true
2019-02-19 20:51:43.304 +01:00 [DBG] removing GcEB5xsqeFzCqvKBuAXL9G2haoPbxCVqRwrku0drm14= persisted grant from database
2019-02-19 20:51:43.355 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 20:51:43.355 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"aab0be716c77479c134dbfff946914bedc09bf516e23a0108a0779ac99d3ff66","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"aab0be716c77479c134dbfff946914bedc09bf516e23a0108a0779ac99d3ff66","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:51:43.362 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:43.362 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:43.370 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:51:43.382 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:43.384 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:51:43.385 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:51:43.406 +01:00 [DBG] Creating refresh token
2019-02-19 20:51:43.406 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 20:51:43.435 +01:00 [DBG] XqSYqHWgY3/dSfzkfPN3z4gSLcmxTVzvk12ShLfHyA0= not found in database
2019-02-19 20:51:43.483 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:43.483 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:43.488 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:51:43.496 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:43.496 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:51:43.496 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:51:43.504 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****RyXg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****1fc2","$type":"Token"},{"TokenType":"access_token","TokenValue":"****wjUQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O3:00000003","TimeStamp":"2019-02-19T19:51:43.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:51:43.504 +01:00 [DBG] Token request success.
2019-02-19 20:51:43.642 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 20:51:43.644 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 20:51:43.644 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 20:51:43.644 +01:00 [DBG] Start userinfo request
2019-02-19 20:51:43.644 +01:00 [DBG] Bearer token found in header
2019-02-19 20:51:43.659 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:43.659 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:43.664 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:43.664 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:43.693 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 20:51:43.694 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550605903,"exp":1550609503,"iss":"http://localhost/identityserver","aud":["http://localhost/identityserver/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550605898,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 20:51:43.694 +01:00 [DBG] Creating userinfo response
2019-02-19 20:51:43.694 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:51:43.696 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:51:43.702 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:51:43.702 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 20:51:43.703 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:51:43.709 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:51:43.730 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 20:51:43.730 +01:00 [DBG] End userinfo request
2019-02-19 20:51:47.783 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:51:47.784 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:51:47.784 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:51:47.785 +01:00 [DBG] Start discovery request
2019-02-19 20:51:47.797 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:51:47.930 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:51:47.934 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:51:47.934 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:51:47.934 +01:00 [DBG] Start key discovery request
2019-02-19 20:51:52.456 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:51:52.459 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:51:52.460 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:51:52.461 +01:00 [DBG] Start token request.
2019-02-19 20:51:52.461 +01:00 [DBG] Start client validation
2019-02-19 20:51:52.462 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:51:52.462 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:51:52.462 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:51:52.471 +01:00 [DBG] mvc found in database: true
2019-02-19 20:51:52.472 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:51:52.472 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:51:52.472 +01:00 [DBG] Client validation success
2019-02-19 20:51:52.472 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076O4:00000004","TimeStamp":"2019-02-19T19:51:52.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:51:52.473 +01:00 [DBG] Start token request validation
2019-02-19 20:51:52.473 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:51:52.480 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:51:52.498 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:52.503 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:51:52.513 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:51:52.513 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:51:52.514 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:51:52.514 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:51:52.521 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****tP_A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O4:00000004","TimeStamp":"2019-02-19T19:51:52.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:51:52.521 +01:00 [DBG] Token request success.
2019-02-19 20:53:10.818 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:53:10.821 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:53:10.821 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:53:10.822 +01:00 [DBG] Start discovery request
2019-02-19 20:53:10.844 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:53:11.329 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:53:11.331 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:53:11.331 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:53:11.332 +01:00 [DBG] Start key discovery request
2019-02-19 20:53:11.544 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 20:53:11.545 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 20:53:11.545 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 20:53:11.545 +01:00 [DBG] Start authorize request
2019-02-19 20:53:11.545 +01:00 [DBG] No user present in authorize request
2019-02-19 20:53:11.546 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:53:11.556 +01:00 [DBG] mvc found in database: true
2019-02-19 20:53:11.557 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:53:11.557 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:53:11.557 +01:00 [DBG] No PKCE used.
2019-02-19 20:53:11.562 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:53:11.579 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:53:11.592 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:53:11.619 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:53:11.620 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:53:11.620 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","UiLocales":null,"Nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","state":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:53:11.621 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 20:53:11.734 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:53:11.744 +01:00 [DBG] mvc found in database: true
2019-02-19 20:53:11.745 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:53:11.745 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:53:11.745 +01:00 [DBG] No PKCE used.
2019-02-19 20:53:11.750 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:53:11.763 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:53:11.769 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:53:11.780 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:53:11.780 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:53:11.791 +01:00 [DBG] mvc found in database: true
2019-02-19 20:53:11.792 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:06.958 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:54:07.060 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:54:07.075 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:07.076 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:07.076 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:54:07.076 +01:00 [DBG] No PKCE used.
2019-02-19 20:54:07.086 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.104 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.116 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.142 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.142 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:54:07.168 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKMKAI076O9:00000002","TimeStamp":"2019-02-19T19:54:07.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 20:54:07.168 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:54:07.168 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 20:54:07.168 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 20:54:07.169 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:54:07.177 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:07.177 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:07.201 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:54:07.201 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:54:07.202 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:54:07.202 +01:00 [DBG] Start authorize callback request
2019-02-19 20:54:07.203 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:54:07.203 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:54:07.214 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:07.214 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:07.214 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:54:07.214 +01:00 [DBG] No PKCE used.
2019-02-19 20:54:07.221 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.233 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.240 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.249 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.250 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:54:07.250 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","UiLocales":null,"Nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5001db69251d68286a0586312ad45771","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","state":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:54:07.256 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:54:07.256 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 20:54:07.336 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:54:07.344 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:07.344 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:07.345 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:54:07.345 +01:00 [DBG] No PKCE used.
2019-02-19 20:54:07.354 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.362 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.368 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:07.377 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:07.378 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:54:07.387 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:07.387 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:07.393 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:54:07.405 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:13.146 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 20:54:13.206 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:54:13.214 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:13.215 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:13.215 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:54:13.215 +01:00 [DBG] No PKCE used.
2019-02-19 20:54:13.220 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:13.229 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:13.235 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:13.242 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:13.243 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:54:13.244 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKMKAI076O6:00000007","TimeStamp":"2019-02-19T19:54:13.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 20:54:13.251 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:13.251 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:13.261 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 20:54:13.261 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 20:54:13.261 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 20:54:13.261 +01:00 [DBG] Start authorize callback request
2019-02-19 20:54:13.262 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:54:13.262 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 20:54:13.270 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:13.270 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:13.270 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 20:54:13.270 +01:00 [DBG] No PKCE used.
2019-02-19 20:54:13.279 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:13.288 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:13.295 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 20:54:13.305 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:13.306 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 20:54:13.307 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","UiLocales":null,"Nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"5001db69251d68286a0586312ad45771","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862027914038227.ZjJhNmU0MWQtNTg1Zi00ZTRkLTkxOTQtYTJiYTA4YWVhODk4MDRmMjYwMDEtNGZkYy00ZWRiLWJmZTgtZjFkZWU4OGU4OTFi","state":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 20:54:13.313 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 20:54:13.313 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 20:54:13.313 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 20:54:13.313 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:54:13.329 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= found in database
2019-02-19 20:54:13.365 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 20:54:13.427 +01:00 [DBG] 95d1NTAXGF+oH/i8WwKHDfroemap49rbaqZiMPTEsUQ= not found in database
2019-02-19 20:54:13.441 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 20:54:13.441 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:54:13.441 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:54:13.450 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****INxw","$type":"Token"},{"TokenType":"code","TokenValue":"****7e6f","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OA:00000004","TimeStamp":"2019-02-19T19:54:13.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:54:13.451 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8PmL14hj505AoMNwRWZB6E9C3CQhs00VqNcnyf_0DBZmejb5Hymzb2eE7ZW7IV6TSR_r_uQLqQ-U9GAvf0SHviI0CY6PJqj-yfPM2jhtpiYH4nE2-fL6gQt2oyMaB_bFvA7sD0wHBU6JR2oeFj7nMqsjQYSEl0jOUyJrnIMm0T0_v4DEjK4Qg0tBAyw_oR-7iHV7oT7EhB05ogxfdYBq9F-g45Mb4GTQbHRiR-gAyCMQMcqcYQAv--Q-CZx5GQlKduj2UVWf3ynGEg9Oz9QqoLsSREFr_zZBkHyTCeNUdW29FgqsuNFm9MiDfZDxabTxdQ","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 20:54:13.451 +01:00 [DBG] Augmenting SignInContext
2019-02-19 20:54:13.452 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 20:54:14.124 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:54:14.125 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:54:14.125 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:54:14.126 +01:00 [DBG] Start token request.
2019-02-19 20:54:14.126 +01:00 [DBG] Start client validation
2019-02-19 20:54:14.126 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:54:14.126 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 20:54:14.209 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 20:54:14.209 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:54:14.236 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:14.236 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:14.236 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:54:14.236 +01:00 [DBG] Client validation success
2019-02-19 20:54:14.236 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076O9:00000004","TimeStamp":"2019-02-19T19:54:14.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:54:14.237 +01:00 [DBG] Start token request validation
2019-02-19 20:54:14.237 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 20:54:14.241 +01:00 [DBG] 95d1NTAXGF+oH/i8WwKHDfroemap49rbaqZiMPTEsUQ= found in database: true
2019-02-19 20:54:14.265 +01:00 [DBG] removing 95d1NTAXGF+oH/i8WwKHDfroemap49rbaqZiMPTEsUQ= persisted grant from database
2019-02-19 20:54:14.298 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 20:54:14.298 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"4c125978643cfb7356b0d3052831b4bd077eb0c12089f942569bd62b7d8a7e6f","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"4c125978643cfb7356b0d3052831b4bd077eb0c12089f942569bd62b7d8a7e6f","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:54:14.305 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:14.305 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:14.311 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:54:14.319 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:14.320 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:54:14.321 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 20:54:14.341 +01:00 [DBG] Creating refresh token
2019-02-19 20:54:14.341 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 20:54:14.364 +01:00 [DBG] 5E1Ri6o4Wl+WfcT/pIN/lxw9FHmqka7q/XV/3vgo6PM= not found in database
2019-02-19 20:54:14.416 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:14.416 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:14.421 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:54:14.429 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:14.429 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 20:54:14.430 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 20:54:14.438 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****POTQ","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****a53d","$type":"Token"},{"TokenType":"access_token","TokenValue":"****7e8w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076O9:00000004","TimeStamp":"2019-02-19T19:54:14.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:54:14.438 +01:00 [DBG] Token request success.
2019-02-19 20:54:14.543 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 20:54:14.544 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 20:54:14.544 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 20:54:14.544 +01:00 [DBG] Start userinfo request
2019-02-19 20:54:14.544 +01:00 [DBG] Bearer token found in header
2019-02-19 20:54:14.559 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:14.559 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:14.566 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:14.566 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:14.574 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 20:54:14.575 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550606054,"exp":1550609654,"iss":"http://localhost/identityserver","aud":["http://localhost/identityserver/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550606047,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 20:54:14.575 +01:00 [DBG] Creating userinfo response
2019-02-19 20:54:14.575 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:54:14.575 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:54:14.581 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:54:14.582 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 20:54:14.582 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 20:54:14.587 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 20:54:14.607 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 20:54:14.607 +01:00 [DBG] End userinfo request
2019-02-19 20:54:25.014 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 20:54:25.015 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 20:54:25.015 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 20:54:25.016 +01:00 [DBG] Start discovery request
2019-02-19 20:54:25.033 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 20:54:25.280 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 20:54:25.282 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 20:54:25.282 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 20:54:25.282 +01:00 [DBG] Start key discovery request
2019-02-19 20:54:25.446 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 20:54:25.447 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 20:54:25.448 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 20:54:25.448 +01:00 [DBG] Start token request.
2019-02-19 20:54:25.448 +01:00 [DBG] Start client validation
2019-02-19 20:54:25.448 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 20:54:25.448 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 20:54:25.448 +01:00 [DBG] Secret id found: mvc
2019-02-19 20:54:25.457 +01:00 [DBG] mvc found in database: true
2019-02-19 20:54:25.457 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 20:54:25.457 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 20:54:25.457 +01:00 [DBG] Client validation success
2019-02-19 20:54:25.458 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OA:00000005","TimeStamp":"2019-02-19T19:54:25.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 20:54:25.463 +01:00 [DBG] Start token request validation
2019-02-19 20:54:25.463 +01:00 [DBG] Start client credentials token request validation
2019-02-19 20:54:25.467 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:54:25.482 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:25.486 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 20:54:25.497 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 20:54:25.497 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 20:54:25.497 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 20:54:25.498 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 20:54:25.509 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****MO0g","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OA:00000005","TimeStamp":"2019-02-19T19:54:25.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 20:54:25.509 +01:00 [DBG] Token request success.
2019-02-19 21:03:58.113 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:03:58.115 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:03:58.115 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:03:58.115 +01:00 [DBG] Start discovery request
2019-02-19 21:03:58.132 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:03:58.651 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:03:58.652 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:03:58.652 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:03:58.652 +01:00 [DBG] Start key discovery request
2019-02-19 21:03:58.803 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 21:03:58.804 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 21:03:58.805 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 21:03:58.805 +01:00 [DBG] Start authorize request
2019-02-19 21:03:58.805 +01:00 [DBG] No user present in authorize request
2019-02-19 21:03:58.805 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:03:58.813 +01:00 [DBG] mvc found in database: true
2019-02-19 21:03:58.813 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:03:58.814 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:03:58.814 +01:00 [DBG] No PKCE used.
2019-02-19 21:03:58.818 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:03:58.829 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:03:58.843 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:03:58.876 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:03:58.877 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:03:58.877 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","UiLocales":null,"Nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","state":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:03:58.877 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 21:03:58.961 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:03:58.969 +01:00 [DBG] mvc found in database: true
2019-02-19 21:03:58.969 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:03:58.969 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:03:58.969 +01:00 [DBG] No PKCE used.
2019-02-19 21:03:58.974 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:03:58.982 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:03:58.989 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:03:58.994 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:03:58.995 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:03:59.001 +01:00 [DBG] mvc found in database: true
2019-02-19 21:03:59.002 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.230 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 21:04:19.283 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:04:19.296 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:19.296 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.296 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:04:19.297 +01:00 [DBG] No PKCE used.
2019-02-19 21:04:19.303 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.314 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.324 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.333 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:04:19.353 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKMKAI076OC:00000002","TimeStamp":"2019-02-19T20:04:19.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 21:04:19.353 +01:00 [DBG] Augmenting SignInContext
2019-02-19 21:04:19.353 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 21:04:19.353 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 21:04:19.354 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 21:04:19.361 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:19.361 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.378 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 21:04:19.378 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 21:04:19.378 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 21:04:19.378 +01:00 [DBG] Start authorize callback request
2019-02-19 21:04:19.379 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:04:19.379 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:04:19.388 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:19.388 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.388 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:04:19.388 +01:00 [DBG] No PKCE used.
2019-02-19 21:04:19.394 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.399 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.404 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.409 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.409 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:04:19.409 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","UiLocales":null,"Nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d81701996fb63d13a148dd70ce9a1194","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","state":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:04:19.417 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 21:04:19.417 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 21:04:19.461 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:04:19.491 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:19.491 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.492 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:04:19.492 +01:00 [DBG] No PKCE used.
2019-02-19 21:04:19.497 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.504 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.510 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:19.517 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:19.518 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:04:19.527 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:19.527 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:19.532 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:04:19.538 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:21.740 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 21:04:21.800 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:04:21.806 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:21.806 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:21.806 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:04:21.806 +01:00 [DBG] No PKCE used.
2019-02-19 21:04:21.816 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:21.827 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:21.832 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:21.840 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:21.840 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:04:21.841 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKMKAI076OC:00000004","TimeStamp":"2019-02-19T20:04:21.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 21:04:21.847 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:21.847 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:21.856 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 21:04:21.856 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 21:04:21.856 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 21:04:21.856 +01:00 [DBG] Start authorize callback request
2019-02-19 21:04:21.857 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:04:21.857 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:04:21.868 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:21.868 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:21.869 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:04:21.869 +01:00 [DBG] No PKCE used.
2019-02-19 21:04:21.875 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:21.886 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:21.891 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:04:21.902 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:21.903 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:04:21.903 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","UiLocales":null,"Nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"d81701996fb63d13a148dd70ce9a1194","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862034387084470.ODRlZjNhOWMtYTg1Ny00NDUxLTlhMmUtM2I1YThmZDNmZDhlNDU3OGNiOGItZDAzMy00YzE3LWE0YWYtODM0NzRjZTM4ZjQ4","state":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:04:21.908 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 21:04:21.909 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 21:04:21.909 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 21:04:21.909 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:04:21.921 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= found in database
2019-02-19 21:04:21.969 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 21:04:22.011 +01:00 [DBG] jONf8N/pvLX/ah/FynWQy7RhAfzML4ihXpXZPk8+lac= not found in database
2019-02-19 21:04:22.029 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 21:04:22.029 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 21:04:22.029 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 21:04:22.037 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****FgBQ","$type":"Token"},{"TokenType":"code","TokenValue":"****ad86","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OF:00000004","TimeStamp":"2019-02-19T20:04:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:04:22.038 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8BZzrJHV3bZFngMUipmJdxXjvHrVRJFyuBSh6WNilxWonywZUukM91vLG7mNSQdL768u4cApOhfqIFEMljjSQv9V1O01lvOK1wsdnIP_PGHArtVrrlPCGGdN_of7Sr11KbJv7wIiJtgcAgLm_WQfT-Uqfrnflso8IntztcfHpMp-oP4lgcfzTfufaNOLKQPYMVTPsIygQtwct-lCj-KwKq25bzrYh9OvDmDdN0mNpTJWczxsi8wSsOzLummQPHHmLsl0670T4KiAR6OP4FdKc2orwchz8v1Onav0_HNmwFCknlmmH-ZYGvVDxPKCnr2w8w","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 21:04:22.039 +01:00 [DBG] Augmenting SignInContext
2019-02-19 21:04:22.040 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 21:04:22.488 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:04:22.489 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:04:22.489 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:04:22.489 +01:00 [DBG] Start token request.
2019-02-19 21:04:22.489 +01:00 [DBG] Start client validation
2019-02-19 21:04:22.489 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:04:22.489 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 21:04:22.490 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 21:04:22.491 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:04:22.513 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:22.513 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:22.514 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:04:22.514 +01:00 [DBG] Client validation success
2019-02-19 21:04:22.514 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OB:00000007","TimeStamp":"2019-02-19T20:04:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:04:22.514 +01:00 [DBG] Start token request validation
2019-02-19 21:04:22.514 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 21:04:22.520 +01:00 [DBG] jONf8N/pvLX/ah/FynWQy7RhAfzML4ihXpXZPk8+lac= found in database: true
2019-02-19 21:04:22.547 +01:00 [DBG] removing jONf8N/pvLX/ah/FynWQy7RhAfzML4ihXpXZPk8+lac= persisted grant from database
2019-02-19 21:04:22.577 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 21:04:22.577 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"fcac6196354c4231d5097fea5a87da1b1e3db489f16e21c73dc53feb7507ad86","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"fcac6196354c4231d5097fea5a87da1b1e3db489f16e21c73dc53feb7507ad86","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:04:22.584 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:22.584 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:22.590 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:04:22.599 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:22.600 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:04:22.600 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:04:22.625 +01:00 [DBG] Creating refresh token
2019-02-19 21:04:22.625 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 21:04:22.648 +01:00 [DBG] cEGkb886/fgmX73MNh+dvJjXrNO7QANBjwn1UTbqQ2c= not found in database
2019-02-19 21:04:22.687 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:22.687 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:22.692 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:04:22.700 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:22.700 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 21:04:22.700 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 21:04:22.707 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****Ux4w","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****2f37","$type":"Token"},{"TokenType":"access_token","TokenValue":"****f8Lw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OB:00000007","TimeStamp":"2019-02-19T20:04:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:04:22.708 +01:00 [DBG] Token request success.
2019-02-19 21:04:22.836 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 21:04:22.839 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 21:04:22.839 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 21:04:22.839 +01:00 [DBG] Start userinfo request
2019-02-19 21:04:22.839 +01:00 [DBG] Bearer token found in header
2019-02-19 21:04:22.849 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:22.850 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:22.857 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:22.857 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:22.865 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 21:04:22.865 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550606662,"exp":1550610262,"iss":"http://localhost/identityserver","aud":["http://localhost/identityserver/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550606659,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 21:04:22.866 +01:00 [DBG] Creating userinfo response
2019-02-19 21:04:22.866 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:04:22.866 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:04:22.872 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:04:22.872 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 21:04:22.872 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:04:22.877 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:04:22.894 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 21:04:22.894 +01:00 [DBG] End userinfo request
2019-02-19 21:04:32.176 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:04:32.177 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:04:32.177 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:04:32.177 +01:00 [DBG] Start discovery request
2019-02-19 21:04:32.193 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:04:32.277 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:04:32.278 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:04:32.278 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:04:32.278 +01:00 [DBG] Start key discovery request
2019-02-19 21:04:32.405 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:04:32.406 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:04:32.406 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:04:32.406 +01:00 [DBG] Start token request.
2019-02-19 21:04:32.406 +01:00 [DBG] Start client validation
2019-02-19 21:04:32.406 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:04:32.406 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:04:32.407 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:04:32.419 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:32.419 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:32.420 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:04:32.420 +01:00 [DBG] Client validation success
2019-02-19 21:04:32.420 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OF:00000005","TimeStamp":"2019-02-19T20:04:32.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:04:32.421 +01:00 [DBG] Start token request validation
2019-02-19 21:04:32.421 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:04:32.426 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:04:32.432 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:32.436 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:04:32.442 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:32.443 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:04:32.445 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:04:32.445 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:04:32.452 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****_AhQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OF:00000005","TimeStamp":"2019-02-19T20:04:32.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:04:32.452 +01:00 [DBG] Token request success.
2019-02-19 21:04:56.762 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:04:56.765 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:04:56.765 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:04:56.765 +01:00 [DBG] Start discovery request
2019-02-19 21:04:56.775 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:04:56.885 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:04:56.885 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:04:56.885 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:04:56.886 +01:00 [DBG] Start key discovery request
2019-02-19 21:04:56.977 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:04:56.978 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:04:56.978 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:04:56.978 +01:00 [DBG] Start token request.
2019-02-19 21:04:56.978 +01:00 [DBG] Start client validation
2019-02-19 21:04:56.978 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:04:56.978 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:04:56.978 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:04:56.988 +01:00 [DBG] mvc found in database: true
2019-02-19 21:04:56.988 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:04:56.988 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:04:56.989 +01:00 [DBG] Client validation success
2019-02-19 21:04:56.989 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OD:00000005","TimeStamp":"2019-02-19T20:04:56.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:04:56.990 +01:00 [DBG] Start token request validation
2019-02-19 21:04:56.990 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:04:56.998 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:04:57.005 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:57.009 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:04:57.017 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:04:57.017 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:04:57.018 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:04:57.018 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:04:57.026 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****v8UQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OD:00000005","TimeStamp":"2019-02-19T20:04:57.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:04:57.026 +01:00 [DBG] Token request success.
2019-02-19 21:07:05.469 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:07:05.471 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:07:05.471 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:07:05.471 +01:00 [DBG] Start discovery request
2019-02-19 21:07:05.514 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:07:06.019 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:07:06.020 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:07:06.020 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:07:06.020 +01:00 [DBG] Start key discovery request
2019-02-19 21:07:06.217 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 21:07:06.219 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 21:07:06.219 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 21:07:06.219 +01:00 [DBG] Start authorize request
2019-02-19 21:07:06.219 +01:00 [DBG] No user present in authorize request
2019-02-19 21:07:06.219 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:06.232 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:06.232 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:06.233 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:06.233 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:06.239 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:06.249 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:06.253 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:06.267 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:06.267 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:06.267 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","UiLocales":null,"Nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","state":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:07:06.267 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 21:07:06.330 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:06.337 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:06.338 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:06.338 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:06.338 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:06.343 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:06.353 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:06.357 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:06.364 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:06.364 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:06.373 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:06.373 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.656 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 21:07:19.703 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:19.710 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:19.711 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.711 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:19.711 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:19.718 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.730 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.734 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.740 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.741 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:19.754 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKMKAI076OJ:00000002","TimeStamp":"2019-02-19T20:07:19.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 21:07:19.754 +01:00 [DBG] Augmenting SignInContext
2019-02-19 21:07:19.755 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 21:07:19.755 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 21:07:19.755 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 21:07:19.763 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:19.764 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.772 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 21:07:19.773 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 21:07:19.773 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 21:07:19.773 +01:00 [DBG] Start authorize callback request
2019-02-19 21:07:19.773 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:07:19.773 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:19.784 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:19.784 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.784 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:19.785 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:19.792 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.799 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.808 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.815 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.815 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:19.815 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","UiLocales":null,"Nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c803f48253beb2a427f87a956707ed26","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","state":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:07:19.826 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 21:07:19.826 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 21:07:19.874 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:19.880 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:19.880 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.880 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:19.881 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:19.891 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.896 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.900 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:19.911 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:19.911 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:19.918 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:19.918 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:19.927 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:07:19.935 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:21.771 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 21:07:21.813 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:21.819 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:21.820 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:21.821 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:21.821 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:21.827 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:21.832 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:21.835 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:21.841 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:21.841 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:21.841 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKMKAI076OI:00000004","TimeStamp":"2019-02-19T20:07:21.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 21:07:21.847 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:21.847 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:21.858 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 21:07:21.858 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 21:07:21.858 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 21:07:21.858 +01:00 [DBG] Start authorize callback request
2019-02-19 21:07:21.859 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:07:21.859 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 21:07:21.867 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:21.868 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:21.868 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 21:07:21.868 +01:00 [DBG] No PKCE used.
2019-02-19 21:07:21.876 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:21.881 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:21.886 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 21:07:21.892 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:21.892 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 21:07:21.892 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","UiLocales":null,"Nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"c803f48253beb2a427f87a956707ed26","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636862036260850906.OWUwZTg5YmYtMWY4MC00ODJiLWFkNDctNzYxYzQ1MWFmNDExODdhMWIzZjUtOWIxZC00NDFkLWFiMjYtNWVlMDYyMmYwMmNk","state":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 21:07:21.898 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 21:07:21.898 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 21:07:21.898 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 21:07:21.898 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:07:21.909 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= found in database
2019-02-19 21:07:21.959 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 21:07:21.994 +01:00 [DBG] +9LD+8z2DNWLcDQJtLr8SZCkx0rhJj2Tk40ZHHPOSTE= not found in database
2019-02-19 21:07:22.028 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 21:07:22.029 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 21:07:22.029 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 21:07:22.036 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****R7FQ","$type":"Token"},{"TokenType":"code","TokenValue":"****6276","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OH:00000003","TimeStamp":"2019-02-19T20:07:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:07:22.036 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8FSjBE8rLglAr8522eSUR22HY9Rxt5TSA18uy1f_dCZZO-UZBo0Mp6m0slFQSI2cGb_yP_xeNan8nJ9USpc1lcJC_HXo8LpRlfjKLfuwgwBsYMvMso9mvFvQ5q_o6OS_Y8Q6uHucYy3pff8pjYse6hHLYqcDJwTb3CIgbNbU_yEA8E_wzo60KpgYfYyfUJtU_R_dO8YRicSYCPGg5fvM6B6cnYAGC4IEkIFIwuxBJyE2Xb4hbGj6uSaNGCcY_06XogiXld5T-t7sje20Jq7KyjZhqpFu8h0ikclYfzrbYVQufACccQ9bPGK6grrAjFf1Og","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 21:07:22.036 +01:00 [DBG] Augmenting SignInContext
2019-02-19 21:07:22.038 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 21:07:22.463 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:07:22.464 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:07:22.464 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:07:22.464 +01:00 [DBG] Start token request.
2019-02-19 21:07:22.464 +01:00 [DBG] Start client validation
2019-02-19 21:07:22.464 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:07:22.464 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 21:07:22.465 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 21:07:22.467 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:07:22.497 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:22.497 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:22.497 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:07:22.498 +01:00 [DBG] Client validation success
2019-02-19 21:07:22.498 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OK:00000003","TimeStamp":"2019-02-19T20:07:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:07:22.498 +01:00 [DBG] Start token request validation
2019-02-19 21:07:22.498 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 21:07:22.502 +01:00 [DBG] +9LD+8z2DNWLcDQJtLr8SZCkx0rhJj2Tk40ZHHPOSTE= found in database: true
2019-02-19 21:07:22.531 +01:00 [DBG] removing +9LD+8z2DNWLcDQJtLr8SZCkx0rhJj2Tk40ZHHPOSTE= persisted grant from database
2019-02-19 21:07:22.563 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 21:07:22.564 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"7a7c7fd711cf1fbba5ca2f302c7837263462b0bd38886c3465c89f586ba86276","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"7a7c7fd711cf1fbba5ca2f302c7837263462b0bd38886c3465c89f586ba86276","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:07:22.573 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:22.573 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:22.578 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:07:22.584 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:22.584 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:07:22.584 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 21:07:22.609 +01:00 [DBG] Creating refresh token
2019-02-19 21:07:22.609 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 21:07:22.630 +01:00 [DBG] AtQsfTIMKrPOKnHEXNvVhsa9Lmmn0ttilS9luGzNluc= not found in database
2019-02-19 21:07:22.673 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:22.674 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:22.678 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:07:22.685 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:22.685 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 21:07:22.685 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 21:07:22.692 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****7gPg","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****a548","$type":"Token"},{"TokenType":"access_token","TokenValue":"****m0bw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OK:00000003","TimeStamp":"2019-02-19T20:07:22.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:07:22.692 +01:00 [DBG] Token request success.
2019-02-19 21:07:22.908 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 21:07:22.909 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 21:07:22.909 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 21:07:22.909 +01:00 [DBG] Start userinfo request
2019-02-19 21:07:22.909 +01:00 [DBG] Bearer token found in header
2019-02-19 21:07:22.921 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:22.922 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:22.929 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:22.929 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:22.934 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 21:07:22.934 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550606842,"exp":1550610442,"iss":"http://localhost/identityserver","aud":["http://localhost/identityserver/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550606839,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 21:07:22.934 +01:00 [DBG] Creating userinfo response
2019-02-19 21:07:22.934 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:07:22.935 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:07:22.939 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:07:22.940 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 21:07:22.940 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 21:07:22.948 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 21:07:22.963 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 21:07:22.964 +01:00 [DBG] End userinfo request
2019-02-19 21:07:25.371 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:07:25.374 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:07:25.374 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:07:25.375 +01:00 [DBG] Start discovery request
2019-02-19 21:07:25.389 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:07:25.514 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:07:25.515 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:07:25.516 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:07:25.516 +01:00 [DBG] Start key discovery request
2019-02-19 21:07:25.690 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:07:25.691 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:07:25.691 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:07:25.691 +01:00 [DBG] Start token request.
2019-02-19 21:07:25.691 +01:00 [DBG] Start client validation
2019-02-19 21:07:25.691 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:07:25.691 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:07:25.691 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:07:25.699 +01:00 [DBG] mvc found in database: true
2019-02-19 21:07:25.699 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:07:25.699 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:07:25.699 +01:00 [DBG] Client validation success
2019-02-19 21:07:25.699 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OH:00000004","TimeStamp":"2019-02-19T20:07:25.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:07:25.702 +01:00 [DBG] Start token request validation
2019-02-19 21:07:25.702 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:07:25.706 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:07:25.715 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:25.719 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:07:25.729 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:07:25.729 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:07:25.729 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:07:25.729 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:07:25.737 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****a8-Q","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OH:00000004","TimeStamp":"2019-02-19T20:07:25.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:07:25.737 +01:00 [DBG] Token request success.
2019-02-19 21:08:05.245 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:08:05.246 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:08:05.246 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:08:05.246 +01:00 [DBG] Start discovery request
2019-02-19 21:08:05.254 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:08:05.321 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:08:05.322 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:08:05.322 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:08:05.322 +01:00 [DBG] Start key discovery request
2019-02-19 21:08:05.396 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:08:05.399 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:08:05.399 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:08:05.399 +01:00 [DBG] Start token request.
2019-02-19 21:08:05.400 +01:00 [DBG] Start client validation
2019-02-19 21:08:05.400 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:08:05.400 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:08:05.400 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:08:05.409 +01:00 [DBG] mvc found in database: true
2019-02-19 21:08:05.409 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:08:05.409 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:08:05.409 +01:00 [DBG] Client validation success
2019-02-19 21:08:05.410 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OG:00000009","TimeStamp":"2019-02-19T20:08:05.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:08:05.411 +01:00 [DBG] Start token request validation
2019-02-19 21:08:05.411 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:08:05.418 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:08:05.424 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:08:05.428 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:08:05.435 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:08:05.436 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:08:05.436 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:08:05.436 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:08:05.442 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****vcgg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OG:00000009","TimeStamp":"2019-02-19T20:08:05.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:08:05.442 +01:00 [DBG] Token request success.
2019-02-19 21:09:28.984 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:09:28.985 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:09:28.985 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:09:28.985 +01:00 [DBG] Start discovery request
2019-02-19 21:09:28.997 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:09:29.063 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:09:29.063 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:09:29.063 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:09:29.063 +01:00 [DBG] Start key discovery request
2019-02-19 21:09:29.139 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:09:29.140 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:09:29.140 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:09:29.140 +01:00 [DBG] Start token request.
2019-02-19 21:09:29.140 +01:00 [DBG] Start client validation
2019-02-19 21:09:29.140 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:09:29.141 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:09:29.141 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:09:29.151 +01:00 [DBG] mvc found in database: true
2019-02-19 21:09:29.151 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:09:29.151 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:09:29.151 +01:00 [DBG] Client validation success
2019-02-19 21:09:29.152 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OL:00000003","TimeStamp":"2019-02-19T20:09:29.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:09:29.152 +01:00 [DBG] Start token request validation
2019-02-19 21:09:29.152 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:09:29.158 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:09:29.167 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:09:29.171 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:09:29.177 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:09:29.177 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:09:29.178 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:09:29.178 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:09:29.187 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****294A","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OL:00000003","TimeStamp":"2019-02-19T20:09:29.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:09:29.187 +01:00 [DBG] Token request success.
2019-02-19 21:12:15.950 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:12:15.951 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:12:15.951 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:12:15.951 +01:00 [DBG] Start discovery request
2019-02-19 21:12:15.963 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:12:16.060 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:12:16.061 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:12:16.061 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:12:16.061 +01:00 [DBG] Start key discovery request
2019-02-19 21:12:16.190 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:12:16.193 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:12:16.193 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:12:16.193 +01:00 [DBG] Start token request.
2019-02-19 21:12:16.196 +01:00 [DBG] Start client validation
2019-02-19 21:12:16.196 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:12:16.196 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:12:16.196 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:12:16.206 +01:00 [DBG] mvc found in database: true
2019-02-19 21:12:16.206 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:12:16.207 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:12:16.207 +01:00 [DBG] Client validation success
2019-02-19 21:12:16.207 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OM:00000003","TimeStamp":"2019-02-19T20:12:16.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:12:16.208 +01:00 [DBG] Start token request validation
2019-02-19 21:12:16.208 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:12:16.214 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:12:16.226 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:12:16.234 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:12:16.261 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:12:16.261 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:12:16.262 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:12:16.262 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:12:16.269 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****6kPA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OM:00000003","TimeStamp":"2019-02-19T20:12:16.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:12:16.270 +01:00 [DBG] Token request success.
2019-02-19 21:18:04.569 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:18:04.572 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:18:04.573 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:18:04.573 +01:00 [DBG] Start discovery request
2019-02-19 21:18:04.591 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:18:04.708 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:18:04.708 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:18:04.708 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:18:04.708 +01:00 [DBG] Start key discovery request
2019-02-19 21:18:04.861 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:18:04.862 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:18:04.863 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:18:04.863 +01:00 [DBG] Start token request.
2019-02-19 21:18:04.863 +01:00 [DBG] Start client validation
2019-02-19 21:18:04.863 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:18:04.863 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:18:04.863 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:18:04.875 +01:00 [DBG] mvc found in database: true
2019-02-19 21:18:04.875 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:18:04.875 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:18:04.875 +01:00 [DBG] Client validation success
2019-02-19 21:18:04.876 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076ON:00000003","TimeStamp":"2019-02-19T20:18:04.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:18:04.876 +01:00 [DBG] Start token request validation
2019-02-19 21:18:04.876 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:18:04.883 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:04.894 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:04.900 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:04.906 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:04.906 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:18:04.907 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:18:04.907 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:18:04.916 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****QNTA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076ON:00000003","TimeStamp":"2019-02-19T20:18:04.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:18:04.916 +01:00 [DBG] Token request success.
2019-02-19 21:18:05.501 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:18:05.516 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:18:05.516 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:18:05.516 +01:00 [DBG] Start discovery request
2019-02-19 21:18:05.527 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:18:05.881 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:18:05.885 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:18:05.885 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:18:05.885 +01:00 [DBG] Start key discovery request
2019-02-19 21:18:35.129 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:18:35.129 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:18:35.129 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:18:35.129 +01:00 [DBG] Start discovery request
2019-02-19 21:18:35.141 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:18:35.224 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:18:35.225 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:18:35.227 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:18:35.227 +01:00 [DBG] Start key discovery request
2019-02-19 21:18:35.295 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:18:35.296 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:18:35.296 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:18:35.296 +01:00 [DBG] Start token request.
2019-02-19 21:18:35.296 +01:00 [DBG] Start client validation
2019-02-19 21:18:35.296 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:18:35.296 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:18:35.296 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:18:35.305 +01:00 [DBG] mvc found in database: true
2019-02-19 21:18:35.305 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:18:35.305 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:18:35.305 +01:00 [DBG] Client validation success
2019-02-19 21:18:35.305 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076ON:00000008","TimeStamp":"2019-02-19T20:18:35.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:18:35.306 +01:00 [DBG] Start token request validation
2019-02-19 21:18:35.306 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:18:35.309 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:35.314 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:35.318 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:35.327 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:35.327 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:18:35.327 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:18:35.327 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:18:35.334 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****UGdw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076ON:00000008","TimeStamp":"2019-02-19T20:18:35.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:18:35.335 +01:00 [DBG] Token request success.
2019-02-19 21:18:49.199 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:18:49.200 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:18:49.201 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:18:49.201 +01:00 [DBG] Start discovery request
2019-02-19 21:18:49.211 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:18:49.284 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:18:49.285 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:18:49.285 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:18:49.285 +01:00 [DBG] Start key discovery request
2019-02-19 21:18:49.362 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:18:49.363 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:18:49.363 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:18:49.363 +01:00 [DBG] Start token request.
2019-02-19 21:18:49.363 +01:00 [DBG] Start client validation
2019-02-19 21:18:49.363 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:18:49.363 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:18:49.364 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:18:49.375 +01:00 [DBG] mvc found in database: true
2019-02-19 21:18:49.376 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:18:49.376 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:18:49.376 +01:00 [DBG] Client validation success
2019-02-19 21:18:49.376 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076ON:0000000B","TimeStamp":"2019-02-19T20:18:49.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:18:49.377 +01:00 [DBG] Start token request validation
2019-02-19 21:18:49.377 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:18:49.383 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:49.392 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:49.396 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:18:49.406 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:18:49.407 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:18:49.407 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:18:49.407 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:18:49.415 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****ksPg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076ON:0000000B","TimeStamp":"2019-02-19T20:18:49.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:18:49.416 +01:00 [DBG] Token request success.
2019-02-19 21:19:02.638 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:19:02.638 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:19:02.638 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:19:02.638 +01:00 [DBG] Start discovery request
2019-02-19 21:19:02.652 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:19:02.753 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:19:02.753 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:19:02.753 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:19:02.753 +01:00 [DBG] Start key discovery request
2019-02-19 21:19:02.829 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:19:02.830 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:19:02.830 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:19:02.830 +01:00 [DBG] Start token request.
2019-02-19 21:19:02.831 +01:00 [DBG] Start client validation
2019-02-19 21:19:02.831 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:19:02.831 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:19:02.831 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:19:02.841 +01:00 [DBG] mvc found in database: true
2019-02-19 21:19:02.842 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:19:02.842 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:19:02.842 +01:00 [DBG] Client validation success
2019-02-19 21:19:02.842 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076ON:0000000E","TimeStamp":"2019-02-19T20:19:02.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:19:02.843 +01:00 [DBG] Start token request validation
2019-02-19 21:19:02.843 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:19:02.848 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:19:02.860 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:19:02.864 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:19:02.875 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:19:02.875 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:19:02.875 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:19:02.875 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:19:02.885 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****qNDA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076ON:0000000E","TimeStamp":"2019-02-19T20:19:02.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:19:02.885 +01:00 [DBG] Token request success.
2019-02-19 21:20:20.465 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:20:20.466 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:20:20.466 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:20:20.467 +01:00 [DBG] Start discovery request
2019-02-19 21:20:20.477 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:20:20.549 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:20:20.550 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:20:20.550 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:20:20.550 +01:00 [DBG] Start key discovery request
2019-02-19 21:20:20.721 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:20:20.722 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:20:20.722 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:20:20.722 +01:00 [DBG] Start token request.
2019-02-19 21:20:20.722 +01:00 [DBG] Start client validation
2019-02-19 21:20:20.722 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:20:20.723 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:20:20.723 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:20:20.735 +01:00 [DBG] mvc found in database: true
2019-02-19 21:20:20.735 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:20:20.736 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:20:20.736 +01:00 [DBG] Client validation success
2019-02-19 21:20:20.736 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OO:00000003","TimeStamp":"2019-02-19T20:20:20.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:20:20.737 +01:00 [DBG] Start token request validation
2019-02-19 21:20:20.737 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:20:20.745 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:20:20.752 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:20:20.755 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:20:20.762 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:20:20.763 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:20:20.763 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:20:20.763 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:20:20.772 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****WnKQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OO:00000003","TimeStamp":"2019-02-19T20:20:20.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:20:20.772 +01:00 [DBG] Token request success.
2019-02-19 21:20:21.401 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:20:21.402 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:20:21.402 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:20:21.402 +01:00 [DBG] Start discovery request
2019-02-19 21:20:21.418 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:20:21.730 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:20:21.734 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:20:21.735 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:20:21.735 +01:00 [DBG] Start key discovery request
2019-02-19 21:26:08.324 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:26:08.325 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:26:08.325 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:26:08.325 +01:00 [DBG] Start discovery request
2019-02-19 21:26:08.360 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:26:08.451 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:26:08.460 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:26:08.461 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:26:08.461 +01:00 [DBG] Start key discovery request
2019-02-19 21:26:08.521 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:26:08.524 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:26:08.525 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:26:08.525 +01:00 [DBG] Start token request.
2019-02-19 21:26:08.525 +01:00 [DBG] Start client validation
2019-02-19 21:26:08.525 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:26:08.525 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:26:08.525 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:26:08.537 +01:00 [DBG] mvc found in database: true
2019-02-19 21:26:08.537 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:26:08.538 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:26:08.538 +01:00 [DBG] Client validation success
2019-02-19 21:26:08.538 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OP:00000003","TimeStamp":"2019-02-19T20:26:08.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:26:08.542 +01:00 [DBG] Start token request validation
2019-02-19 21:26:08.542 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:26:08.546 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:08.556 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:08.560 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:08.565 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:08.565 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:26:08.565 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:26:08.565 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:26:08.574 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****lC9w","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OP:00000003","TimeStamp":"2019-02-19T20:26:08.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:26:08.574 +01:00 [DBG] Token request success.
2019-02-19 21:26:09.348 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:26:09.349 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:26:09.349 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:26:09.349 +01:00 [DBG] Start discovery request
2019-02-19 21:26:09.363 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:26:09.655 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:26:09.656 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:26:09.656 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:26:09.656 +01:00 [DBG] Start key discovery request
2019-02-19 21:26:28.874 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:26:28.874 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:26:28.875 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:26:28.875 +01:00 [DBG] Start discovery request
2019-02-19 21:26:28.887 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:26:28.988 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:26:28.989 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:26:28.989 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:26:28.989 +01:00 [DBG] Start key discovery request
2019-02-19 21:26:29.069 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:26:29.072 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:26:29.073 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:26:29.073 +01:00 [DBG] Start token request.
2019-02-19 21:26:29.073 +01:00 [DBG] Start client validation
2019-02-19 21:26:29.073 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:26:29.073 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:26:29.073 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:26:29.086 +01:00 [DBG] mvc found in database: true
2019-02-19 21:26:29.086 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:26:29.086 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:26:29.086 +01:00 [DBG] Client validation success
2019-02-19 21:26:29.086 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OP:00000008","TimeStamp":"2019-02-19T20:26:29.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:26:29.087 +01:00 [DBG] Start token request validation
2019-02-19 21:26:29.087 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:26:29.091 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:29.098 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:29.103 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:29.109 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:29.109 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:26:29.111 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:26:29.111 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:26:29.118 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****phrw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OP:00000008","TimeStamp":"2019-02-19T20:26:29.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:26:29.118 +01:00 [DBG] Token request success.
2019-02-19 21:26:37.087 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:26:37.087 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:26:37.087 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:26:37.088 +01:00 [DBG] Start discovery request
2019-02-19 21:26:37.097 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:26:37.247 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:26:37.248 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:26:37.248 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:26:37.248 +01:00 [DBG] Start key discovery request
2019-02-19 21:26:37.315 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:26:37.315 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:26:37.316 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:26:37.316 +01:00 [DBG] Start token request.
2019-02-19 21:26:37.316 +01:00 [DBG] Start client validation
2019-02-19 21:26:37.316 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:26:37.316 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:26:37.316 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:26:37.326 +01:00 [DBG] mvc found in database: true
2019-02-19 21:26:37.326 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:26:37.326 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:26:37.326 +01:00 [DBG] Client validation success
2019-02-19 21:26:37.326 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OP:0000000B","TimeStamp":"2019-02-19T20:26:37.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:26:37.327 +01:00 [DBG] Start token request validation
2019-02-19 21:26:37.327 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:26:37.332 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:37.342 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:37.345 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:26:37.350 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:26:37.351 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:26:37.351 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:26:37.352 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:26:37.358 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****zLyA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OP:0000000B","TimeStamp":"2019-02-19T20:26:37.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:26:37.359 +01:00 [DBG] Token request success.
2019-02-19 21:28:12.767 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:28:12.769 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:28:12.769 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:28:12.770 +01:00 [DBG] Start discovery request
2019-02-19 21:28:12.837 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:28:12.985 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:28:12.986 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:28:12.986 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:28:12.986 +01:00 [DBG] Start key discovery request
2019-02-19 21:28:13.098 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:28:13.099 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:28:13.100 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:28:13.100 +01:00 [DBG] Start token request.
2019-02-19 21:28:13.100 +01:00 [DBG] Start client validation
2019-02-19 21:28:13.100 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:28:13.100 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:28:13.100 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:28:13.112 +01:00 [DBG] mvc found in database: true
2019-02-19 21:28:13.112 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:28:13.112 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:28:13.112 +01:00 [DBG] Client validation success
2019-02-19 21:28:13.112 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OQ:00000003","TimeStamp":"2019-02-19T20:28:13.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:28:13.113 +01:00 [DBG] Start token request validation
2019-02-19 21:28:13.113 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:28:13.119 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:28:13.127 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:28:13.130 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:28:13.140 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:28:13.140 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:28:13.141 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:28:13.141 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:28:13.148 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****SyWg","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OQ:00000003","TimeStamp":"2019-02-19T20:28:13.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:28:13.148 +01:00 [DBG] Token request success.
2019-02-19 21:28:13.762 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:28:13.764 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:28:13.764 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:28:13.765 +01:00 [DBG] Start discovery request
2019-02-19 21:28:13.779 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:28:14.214 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:28:14.214 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:28:14.214 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:28:14.215 +01:00 [DBG] Start key discovery request
2019-02-19 21:31:24.263 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:31:24.265 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:31:24.265 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:31:24.265 +01:00 [DBG] Start discovery request
2019-02-19 21:31:24.280 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:31:24.385 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:31:24.386 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:31:24.386 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:31:24.386 +01:00 [DBG] Start key discovery request
2019-02-19 21:31:24.462 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:31:24.479 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:31:24.479 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:31:24.479 +01:00 [DBG] Start token request.
2019-02-19 21:31:24.479 +01:00 [DBG] Start client validation
2019-02-19 21:31:24.479 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:31:24.479 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:31:24.479 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:31:24.488 +01:00 [DBG] mvc found in database: true
2019-02-19 21:31:24.489 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:31:24.489 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:31:24.489 +01:00 [DBG] Client validation success
2019-02-19 21:31:24.489 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OR:00000003","TimeStamp":"2019-02-19T20:31:24.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:31:24.490 +01:00 [DBG] Start token request validation
2019-02-19 21:31:24.490 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:31:24.493 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:31:24.502 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:31:24.506 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:31:24.518 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:31:24.518 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:31:24.518 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:31:24.518 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:31:24.530 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****NNBQ","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OR:00000003","TimeStamp":"2019-02-19T20:31:24.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:31:24.530 +01:00 [DBG] Token request success.
2019-02-19 21:31:45.696 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 21:31:45.698 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 21:31:45.698 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 21:31:45.698 +01:00 [DBG] Start discovery request
2019-02-19 21:31:45.711 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 21:31:45.829 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 21:31:45.830 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 21:31:45.830 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 21:31:45.831 +01:00 [DBG] Start key discovery request
2019-02-19 21:31:45.951 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 21:31:45.954 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 21:31:45.954 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 21:31:45.955 +01:00 [DBG] Start token request.
2019-02-19 21:31:45.955 +01:00 [DBG] Start client validation
2019-02-19 21:31:45.955 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 21:31:45.955 +01:00 [DBG] Parser found secret: BasicAuthenticationSecretParser
2019-02-19 21:31:45.955 +01:00 [DBG] Secret id found: mvc
2019-02-19 21:31:45.968 +01:00 [DBG] mvc found in database: true
2019-02-19 21:31:45.968 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 21:31:45.968 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 21:31:45.969 +01:00 [DBG] Client validation success
2019-02-19 21:31:45.969 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKMKAI076OR:00000006","TimeStamp":"2019-02-19T20:31:45.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 21:31:45.969 +01:00 [DBG] Start token request validation
2019-02-19 21:31:45.970 +01:00 [DBG] Start client credentials token request validation
2019-02-19 21:31:45.975 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:31:45.990 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:31:45.997 +01:00 [DBG] Found [] identity scopes in database
2019-02-19 21:31:46.010 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 21:31:46.011 +01:00 [DBG] mvc credentials token request validation success
2019-02-19 21:31:46.011 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"client_credentials","Scopes":"api1","AuthorizationCode":null,"RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"grant_type":"client_credentials","scope":"api1"},"$type":"TokenRequestValidationLog"}
2019-02-19 21:31:46.011 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 21:31:46.026 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"api1","GrantType":"client_credentials","Tokens":[{"TokenType":"access_token","TokenValue":"****cOYA","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKMKAI076OR:00000006","TimeStamp":"2019-02-19T20:31:46.0000000Z","ProcessId":28012,"LocalIpAddress":"127.0.0.1:31074","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 21:31:46.026 +01:00 [DBG] Token request success.
