2019-02-13 20:02:50.341 +01:00 [INF] Using the default authentication scheme idsrv for IdentityServer
2019-02-13 20:02:50.385 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for authentication
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-in
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for sign-out
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for challenge
2019-02-13 20:02:50.386 +01:00 [DBG] Using idsrv as default ASP.NET Core scheme for forbid
2019-02-13 20:02:50.966 +01:00 [DBG] Starting grant removal
2019-02-13 20:02:51.449 +01:00 [DBG] Login Url: /Account/Login
2019-02-13 20:02:51.454 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 20:02:51.454 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-13 20:02:51.455 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-13 20:02:51.455 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 20:02:51.455 +01:00 [DBG] Error Url: /home/error
2019-02-13 20:02:51.455 +01:00 [DBG] Error Id Parameter: errorId
2019-02-13 20:03:16.205 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-13 20:03:16.212 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-13 20:03:16.213 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-13 20:03:16.218 +01:00 [DBG] Start discovery request
2019-02-13 20:03:17.921 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-13 20:03:20.431 +01:00 [INF] AuthenticationScheme: idsrv was challenged.
2019-02-13 20:04:02.099 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:02.288 +01:00 [INF] {"Username":"bob","Provider":null,"ProviderUserId":null,"SubjectId":"88421113","DisplayName":"bob","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKHSND0GFCN:00000006","TimeStamp":"2019-02-13T19:04:02.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-13 20:04:02.313 +01:00 [DBG] Augmenting SignInContext
2019-02-13 20:04:02.317 +01:00 [DBG] Adding idp claim with value: local
2019-02-13 20:04:02.318 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-13 20:04:02.334 +01:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-13 20:04:02.506 +01:00 [DBG] 0 persisted grants found for 88421113
2019-02-13 20:04:15.889 +01:00 [DBG] CORS request made for path: /Account/Logout from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:15.966 +01:00 [INF] AuthenticationScheme: idsrv signed out.
2019-02-13 20:04:15.968 +01:00 [INF] {"SubjectId":"88421113","DisplayName":"bob","Category":"Authentication","Name":"User Logout Success","EventType":"Success","Id":1002,"Message":null,"ActivityId":"0HLKHSND0GFCP:0000000B","TimeStamp":"2019-02-13T19:04:15.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLogoutSuccessEvent"}
2019-02-13 20:04:25.831 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-13 20:04:25.869 +01:00 [INF] {"Username":"alice","Provider":null,"ProviderUserId":null,"SubjectId":"818727","DisplayName":"alice","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKHSND0GFCP:0000000D","TimeStamp":"2019-02-13T19:04:25.0000000Z","ProcessId":8944,"LocalIpAddress":"127.0.0.1:41109","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-13 20:04:25.870 +01:00 [DBG] Augmenting SignInContext
2019-02-13 20:04:25.870 +01:00 [DBG] Adding idp claim with value: local
2019-02-13 20:04:25.870 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-13 20:04:25.871 +01:00 [INF] AuthenticationScheme: idsrv signed in.
2019-02-13 20:04:30.449 +01:00 [DBG] 0 persisted grants found for 818727
2019-02-13 20:30:41.578 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-13 20:30:41.626 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-13 20:30:41.627 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-13 20:30:41.979 +01:00 [DBG] Starting grant removal
2019-02-13 20:30:42.333 +01:00 [DBG] Login Url: /Account/Login
2019-02-13 20:30:42.336 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-13 20:30:42.336 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-13 20:30:42.336 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-13 20:30:42.337 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-13 20:30:42.337 +01:00 [DBG] Error Url: /home/error
2019-02-13 20:30:42.337 +01:00 [DBG] Error Id Parameter: errorId
2019-02-13 20:30:46.720 +01:00 [INF] AuthenticationScheme: Identity.Application was challenged.
2019-02-17 20:35:13.518 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-17 20:35:13.558 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-17 20:35:13.559 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-17 20:35:13.788 +01:00 [DBG] Starting grant removal
2019-02-17 20:35:14.040 +01:00 [DBG] Login Url: /Account/Login
2019-02-17 20:35:14.043 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-17 20:35:14.043 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-17 20:35:14.043 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-17 20:35:14.043 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-17 20:35:14.043 +01:00 [DBG] Error Url: /home/error
2019-02-17 20:35:14.043 +01:00 [DBG] Error Id Parameter: errorId
2019-02-17 20:39:06.612 +01:00 [WRN] User ae8e3d75-6906-4d20-8fbc-ecb3b20468c6 password validation failed: PasswordTooShort;PasswordRequiresNonAlphanumeric;PasswordRequiresDigit.
2019-02-17 20:53:28.833 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-17 20:53:28.900 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-17 20:53:28.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-17 20:53:28.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-17 20:53:28.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-17 20:53:28.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-17 20:53:29.252 +01:00 [DBG] Starting grant removal
2019-02-17 20:53:29.766 +01:00 [DBG] Login Url: /Account/Login
2019-02-17 20:53:29.773 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-17 20:53:29.773 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-17 20:53:29.773 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-17 20:53:29.773 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-17 20:53:29.773 +01:00 [DBG] Error Url: /home/error
2019-02-17 20:53:29.773 +01:00 [DBG] Error Id Parameter: errorId
2019-02-17 21:05:47.705 +01:00 [DBG] Stopping grant removal
2019-02-17 21:05:47.860 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:16:30.784 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:16:30.858 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:16:30.859 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:16:30.859 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:16:31.371 +01:00 [DBG] Starting grant removal
2019-02-18 22:16:31.813 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:16:31.818 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:16:31.818 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:16:31.818 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:16:31.819 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:16:31.819 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:16:31.819 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:18:40.484 +01:00 [DBG] Stopping grant removal
2019-02-18 22:18:40.628 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:23:25.838 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:23:25.910 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:23:25.910 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:23:25.911 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:23:26.293 +01:00 [DBG] Starting grant removal
2019-02-18 22:23:26.800 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:23:26.805 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:23:26.805 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:23:26.805 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:23:26.805 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:23:26.805 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:23:26.805 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:23:35.991 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-18 22:23:36.016 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-18 22:23:36.016 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-18 22:23:36.027 +01:00 [DBG] Start discovery request
2019-02-18 22:23:38.477 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-18 22:23:38.813 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-18 22:23:38.816 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-18 22:23:38.816 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-18 22:23:38.825 +01:00 [DBG] Start key discovery request
2019-02-18 22:23:38.947 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:23:38.952 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:23:38.952 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:23:38.958 +01:00 [DBG] Start authorize request
2019-02-18 22:23:38.973 +01:00 [DBG] No user present in authorize request
2019-02-18 22:23:38.980 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:23:39.582 +01:00 [DBG] mvc found in database: true
2019-02-18 22:23:39.597 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:23:39.621 +01:00 [ERR] Invalid redirect_uri: http://localhost/Client/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861218189211222.ZjBlMmMzMGEtOTE5ZS00ZmI1LWEwOGUtY2ZjZTVhOGQzNmM1ZTdiNTllMTgtNTI5Ni00MzUyLWJhOTMtMmNhODA2ZjQ1ODNm","state":"CfDJ8FEe6epQUxdNrMN2g6RdU7tPrrwhusFCvSqckevjCof7VP5sqBEypf1hT_uLueyU2jSL-3XOyQk3Ybi6qgrh6UDB9AJOS77Hd3vdxYumzlQW0k5iJmU_jEWhOWMhQtQBvSChJYII3rTDyifl27_0ddHJ3o4sYsxx4eolXbQ-Jtd6w0Pq7otdF3AGxe2SZMckAv_fmXGPwwjN_HHFJzrWXNTFpn8J-lUvVWHd1utX6chD289-mA2mhZ251qsqBDf73cecH2bUgPMEcbpiU9YdCxHS8F7WHzyZ_q08Ms_7a3R_PfG-jztG-k5O6WVGFTatsg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:23:39.632 +01:00 [ERR] Request validation failed
2019-02-18 22:23:39.632 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861218189211222.ZjBlMmMzMGEtOTE5ZS00ZmI1LWEwOGUtY2ZjZTVhOGQzNmM1ZTdiNTllMTgtNTI5Ni00MzUyLWJhOTMtMmNhODA2ZjQ1ODNm","state":"CfDJ8FEe6epQUxdNrMN2g6RdU7tPrrwhusFCvSqckevjCof7VP5sqBEypf1hT_uLueyU2jSL-3XOyQk3Ybi6qgrh6UDB9AJOS77Hd3vdxYumzlQW0k5iJmU_jEWhOWMhQtQBvSChJYII3rTDyifl27_0ddHJ3o4sYsxx4eolXbQ-Jtd6w0Pq7otdF3AGxe2SZMckAv_fmXGPwwjN_HHFJzrWXNTFpn8J-lUvVWHd1utX6chD289-mA2mhZ251qsqBDf73cecH2bUgPMEcbpiU9YdCxHS8F7WHzyZ_q08Ms_7a3R_PfG-jztG-k5O6WVGFTatsg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:23:39.693 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLST8VSQOE:00000002","TimeStamp":"2019-02-18T21:23:39.0000000Z","ProcessId":15300,"LocalIpAddress":"127.0.0.1:26654","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:24:37.994 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:24:38.042 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:24:38.042 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:24:38.043 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:24:38.292 +01:00 [DBG] Starting grant removal
2019-02-18 22:24:41.864 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:24:41.882 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:24:41.926 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:24:41.960 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:24:41.969 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:24:41.972 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:24:41.974 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:25:29.720 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-18 22:25:29.765 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-18 22:25:29.780 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-18 22:25:29.808 +01:00 [DBG] Start discovery request
2019-02-18 22:25:31.985 +01:00 [DBG] Found ["openid","profile","api1"] as all scopes in database
2019-02-18 22:25:32.327 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-18 22:25:32.332 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-18 22:25:32.334 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-18 22:25:32.353 +01:00 [DBG] Start key discovery request
2019-02-18 22:25:32.587 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:25:32.603 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:25:32.605 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:25:32.633 +01:00 [DBG] Start authorize request
2019-02-18 22:25:32.663 +01:00 [DBG] No user present in authorize request
2019-02-18 22:25:32.694 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:25:33.407 +01:00 [DBG] mvc found in database: true
2019-02-18 22:25:33.421 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:25:33.444 +01:00 [ERR] Invalid redirect_uri: http://localhost/Client/signin-oidc
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861219324833690.NTM5ODVhMTgtMTE4YS00YmQ1LTg3MjctMDM0MzQzYWU2NTZiYTZhODlkMDItYmUzZi00NjA5LWE1YTYtYmI5NmFmOGYxMGNh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIxh0Ps2N0jplGkeXgAu-hosJo2yoQEou4euenenZhlTHjV2_dcFcOBWC21mcRNd61QCgQhmJZOXHEGo_jjr2cA7kaMACu5dlKlyH19hZOAeeWWK3vOaIQfXBWVnc4KMJ-QlHkO7fIu01Du48POoY8nyz8xxAbg3_X6OYbWxYUel6kM6tPjj4G9X_Y2pSFYMbKoVQfY5KN8cCffeV1f6ZQCZ9vLYXXClU6FbEAIZo6xMzJCoc8JcTr2flcckbCttfxlyZyGZx8g3q2zaRuyvQ4QZo_HJSH0q_u9dV4SCJmiedw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:25:33.485 +01:00 [ERR] Request validation failed
2019-02-18 22:25:33.486 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"AllowedRedirectUris":["http://localhost:5001/signin-oidc"],"SubjectId":"anonymous","ResponseType":null,"ResponseMode":null,"GrantType":null,"RequestedScopes":"","State":null,"UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861219324833690.NTM5ODVhMTgtMTE4YS00YmQ1LTg3MjctMDM0MzQzYWU2NTZiYTZhODlkMDItYmUzZi00NjA5LWE1YTYtYmI5NmFmOGYxMGNh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIxh0Ps2N0jplGkeXgAu-hosJo2yoQEou4euenenZhlTHjV2_dcFcOBWC21mcRNd61QCgQhmJZOXHEGo_jjr2cA7kaMACu5dlKlyH19hZOAeeWWK3vOaIQfXBWVnc4KMJ-QlHkO7fIu01Du48POoY8nyz8xxAbg3_X6OYbWxYUel6kM6tPjj4G9X_Y2pSFYMbKoVQfY5KN8cCffeV1f6ZQCZ9vLYXXClU6FbEAIZo6xMzJCoc8JcTr2flcckbCttfxlyZyGZx8g3q2zaRuyvQ4QZo_HJSH0q_u9dV4SCJmiedw","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:25:33.531 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Authorize","SubjectId":null,"Scopes":"","GrantType":null,"Error":"unauthorized_client","ErrorDescription":"Invalid redirect_uri","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLSTUGGPRT:00000001","TimeStamp":"2019-02-18T21:25:33.0000000Z","ProcessId":20408,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:28:08.843 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:28:08.899 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:28:08.900 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:28:08.901 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:28:08.902 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:28:08.903 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:28:09.394 +01:00 [DBG] Starting grant removal
2019-02-18 22:28:12.097 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:28:12.104 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:28:12.105 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:28:12.106 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:28:12.108 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:28:12.109 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:28:12.110 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:28:21.389 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:28:21.482 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:28:21.509 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:28:21.533 +01:00 [DBG] Start authorize request
2019-02-18 22:28:21.576 +01:00 [DBG] No user present in authorize request
2019-02-18 22:28:21.649 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:28:25.402 +01:00 [DBG] mvc found in database: true
2019-02-18 22:28:25.430 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:28:25.463 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:28:25.469 +01:00 [DBG] No PKCE used.
2019-02-18 22:28:25.661 +01:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-18 22:28:26.013 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:28:26.030 +01:00 [ERR] Invalid scope: role
2019-02-18 22:28:26.039 +01:00 [ERR] Request validation failed
2019-02-18 22:28:26.068 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIyupxccr5zeicD964T8SNmetiGuT1JazHxMoYyyNBWAOnfjNd37C8Pm1S7MNODimvk3IClofAiXD9qg10Z30XEGaFPIdjEydYEutr0cEk0CflnO6dhTn8VFDsdRjoPo7V4NsHmS0IUaajS0KeNjbGi8CACMSgz563COswcyyfozx4zYtU5-kMVrG--dRSypJsxZpA46XZY74hZmyzbDrQlbZD2pO654CnAq2fGvzYSBQF1c71G7EthtQlsSj_JHArxAPueNnrBZ4AMOTKku_Q1h5BKL4lzhWna6wMCv78Frrg","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861221012567129.ODA2NzA2OTQtY2RjOC00NzA4LWJlZGQtYmMwMjg1ZTIxYTlmNDQ2YTM1NTItMzY0YS00OTczLTgwOTYtYmQxNzFhMDg2OTcy","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIyupxccr5zeicD964T8SNmetiGuT1JazHxMoYyyNBWAOnfjNd37C8Pm1S7MNODimvk3IClofAiXD9qg10Z30XEGaFPIdjEydYEutr0cEk0CflnO6dhTn8VFDsdRjoPo7V4NsHmS0IUaajS0KeNjbGi8CACMSgz563COswcyyfozx4zYtU5-kMVrG--dRSypJsxZpA46XZY74hZmyzbDrQlbZD2pO654CnAq2fGvzYSBQF1c71G7EthtQlsSj_JHArxAPueNnrBZ4AMOTKku_Q1h5BKL4lzhWna6wMCv78Frrg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:28:26.132 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile role offline_access api1","GrantType":"hybrid","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLSVTC75QN:00000001","TimeStamp":"2019-02-18T21:28:26.0000000Z","ProcessId":9436,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:29:30.497 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:29:31.337 +01:00 [DBG] Stopping grant removal
2019-02-18 22:33:35.061 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:33:35.099 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:33:35.099 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:33:35.100 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:33:35.335 +01:00 [DBG] Starting grant removal
2019-02-18 22:33:38.114 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:33:38.121 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:33:38.122 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:33:38.123 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:33:38.127 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:33:38.129 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:33:38.130 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:34:04.718 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:34:04.777 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:34:04.788 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:34:04.808 +01:00 [DBG] Start authorize request
2019-02-18 22:34:04.828 +01:00 [DBG] No user present in authorize request
2019-02-18 22:34:04.863 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:34:08.189 +01:00 [DBG] mvc found in database: true
2019-02-18 22:34:08.234 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:34:08.261 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:34:08.268 +01:00 [DBG] No PKCE used.
2019-02-18 22:34:08.454 +01:00 [DBG] Found ["openid","profile"] identity scopes in database
2019-02-18 22:34:08.936 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:34:08.958 +01:00 [ERR] Invalid scope: role
2019-02-18 22:34:08.967 +01:00 [ERR] Request validation failed
2019-02-18 22:34:08.999 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIzZEFXVurHH5CsGow3cpmz1Y_UOxsnTFb8wA_mUczQu3Bq4V5bvv3ehlPsgdbc8c-Y41iWAuODGyLJ5JS0Ev__nG9wlmKsZNG57DQIe6m4-1NIUytqZZIYV9gREqc0jwDy7OSuBgyduieG-8k4CsZygW1dL6LsKhtHEMSNqHB-HGbQVghc3lu1tqoKXsRlVuRU0OR4Yv3my80hGso7L30-cYKhOjx0flCyIDJgVAqypY1Z2FdaiQEIyBMHM_tBAIWq7HpsLKJdjx7dcADkdb4BegMeLVRrSXC_efOVGBimbPQ","UiLocales":null,"Nonce":null,"AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861224446658405.OGU2YzZkMjctY2U4Yi00MzU3LWJhODgtYTU1NTdhZTFjY2EwNmMwY2U3MTUtYTUxYi00YzdiLTg3OWUtMDg0YTZhNDM2MzZi","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIzZEFXVurHH5CsGow3cpmz1Y_UOxsnTFb8wA_mUczQu3Bq4V5bvv3ehlPsgdbc8c-Y41iWAuODGyLJ5JS0Ev__nG9wlmKsZNG57DQIe6m4-1NIUytqZZIYV9gREqc0jwDy7OSuBgyduieG-8k4CsZygW1dL6LsKhtHEMSNqHB-HGbQVghc3lu1tqoKXsRlVuRU0OR4Yv3my80hGso7L30-cYKhOjx0flCyIDJgVAqypY1Z2FdaiQEIyBMHM_tBAIWq7HpsLKJdjx7dcADkdb4BegMeLVRrSXC_efOVGBimbPQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:34:09.130 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":null,"Scopes":"openid profile role offline_access api1","GrantType":"hybrid","Error":"invalid_scope","ErrorDescription":"Invalid scope","Category":"Token","Name":"Token Issued Failure","EventType":"Failure","Id":2001,"Message":null,"ActivityId":"0HLKLT2UG6JJF:00000001","TimeStamp":"2019-02-18T21:34:09.0000000Z","ProcessId":14004,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedFailureEvent"}
2019-02-18 22:36:13.318 +01:00 [DBG] TaskCanceledException. Exiting.
2019-02-18 22:36:14.330 +01:00 [DBG] Stopping grant removal
2019-02-18 22:42:03.394 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-18 22:42:03.456 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-18 22:42:03.457 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-18 22:42:03.458 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-18 22:42:03.756 +01:00 [DBG] Starting grant removal
2019-02-18 22:42:06.547 +01:00 [DBG] Login Url: /Account/Login
2019-02-18 22:42:06.555 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-18 22:42:06.556 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-18 22:42:06.557 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-18 22:42:06.558 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-18 22:42:06.559 +01:00 [DBG] Error Url: /home/error
2019-02-18 22:42:06.562 +01:00 [DBG] Error Id Parameter: errorId
2019-02-18 22:42:17.195 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-18 22:42:17.275 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-18 22:42:17.303 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-18 22:42:17.329 +01:00 [DBG] Start authorize request
2019-02-18 22:42:17.385 +01:00 [DBG] No user present in authorize request
2019-02-18 22:42:17.445 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:20.970 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:20.987 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:20.998 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:21.001 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:21.126 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.448 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.481 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.492 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.520 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:21.544 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8Caw9fL3ULdMo90eR5MKzIylk0lz6CVVGyUDpZ_5bPn6e7A3u9PvN8ytD-CZ-RDGLIumI00-7VNtOTtuInYiClQUKf8_uo0-XCjvwKrLGL14VBRMa5TgxyYWuUyaESj4u2DpvdgieeL0Ry55wCrjmY-KUtzT4id8QM7nwSNqRr4P6lXHv4uoxqZEFu9NpADLUbR0HewPbk1XPFgphmMsi3VoHsPjmsfS3Qo4s5rqSuWhymUcjfK6btYpuDU1qxDXzm5hCMiJ0F1Qs5nQzBmKkXhGHHyBszHyrhXrwyaAEhctKIioy6dnyNxSFE48od1fxg","UiLocales":null,"Nonce":"636861229371034608.Y2M2ZTQ0OWYtMmE4NS00MmEwLTgxMzEtNDY5MGNiYTRmODliZDlkZTQ3NzQtMGVjMS00ZmM0LWJjZDgtYWJmZDM0MDk0OWRh","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861229371034608.Y2M2ZTQ0OWYtMmE4NS00MmEwLTgxMzEtNDY5MGNiYTRmODliZDlkZTQ3NzQtMGVjMS00ZmM0LWJjZDgtYWJmZDM0MDk0OWRh","state":"CfDJ8Caw9fL3ULdMo90eR5MKzIylk0lz6CVVGyUDpZ_5bPn6e7A3u9PvN8ytD-CZ-RDGLIumI00-7VNtOTtuInYiClQUKf8_uo0-XCjvwKrLGL14VBRMa5TgxyYWuUyaESj4u2DpvdgieeL0Ry55wCrjmY-KUtzT4id8QM7nwSNqRr4P6lXHv4uoxqZEFu9NpADLUbR0HewPbk1XPFgphmMsi3VoHsPjmsfS3Qo4s5rqSuWhymUcjfK6btYpuDU1qxDXzm5hCMiJ0F1Qs5nQzBmKkXhGHHyBszHyrhXrwyaAEhctKIioy6dnyNxSFE48od1fxg","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-18 22:42:21.588 +01:00 [INF] Showing login: User is not authenticated
2019-02-18 22:42:21.818 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:21.835 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:21.837 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:21.842 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:21.843 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:21.857 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.876 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.884 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:21.907 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:21.910 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:21.929 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:21.930 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.134 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-18 22:42:47.234 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:47.243 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.243 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.248 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:47.249 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:47.253 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.261 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.268 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.277 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.278 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:47.322 +01:00 [INF] {"Username":"Admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKLT7LUTV8B:00000002","TimeStamp":"2019-02-18T21:42:47.0000000Z","ProcessId":18644,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-18 22:42:47.331 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:42:47.339 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.339 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:42:47.341 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:42:47.342 +01:00 [DBG] No PKCE used.
2019-02-18 22:42:47.356 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.361 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.369 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:42:47.375 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:42:47.377 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:42:47.391 +01:00 [DBG] mvc found in database: true
2019-02-18 22:42:47.392 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.680 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-18 22:43:01.728 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:43:01.735 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.735 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.737 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:43:01.738 +01:00 [DBG] No PKCE used.
2019-02-18 22:43:01.748 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.764 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.769 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.774 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.775 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:43:01.779 +01:00 [INF] {"Username":"Admin","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKLT7LUTV8D:00000003","TimeStamp":"2019-02-18T21:43:01.0000000Z","ProcessId":18644,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-18 22:43:01.789 +01:00 [DBG] Start authorize request protocol validation
2019-02-18 22:43:01.799 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.799 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 22:43:01.802 +01:00 [DBG] Checking for PKCE parameters
2019-02-18 22:43:01.804 +01:00 [DBG] No PKCE used.
2019-02-18 22:43:01.812 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.817 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.823 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-18 22:43:01.828 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-18 22:43:01.832 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-18 22:43:01.839 +01:00 [DBG] mvc found in database: true
2019-02-18 22:43:01.840 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-18 23:42:03.819 +01:00 [INF] Removing 0 grants
2019-02-19 00:42:03.834 +01:00 [INF] Removing 0 grants
2019-02-19 01:42:03.836 +01:00 [INF] Removing 0 grants
2019-02-19 02:42:03.853 +01:00 [INF] Removing 0 grants
2019-02-19 03:42:03.862 +01:00 [INF] Removing 0 grants
2019-02-19 04:42:03.866 +01:00 [INF] Removing 0 grants
2019-02-19 05:42:03.868 +01:00 [INF] Removing 0 grants
2019-02-19 06:42:03.871 +01:00 [INF] Removing 0 grants
2019-02-19 07:42:03.875 +01:00 [INF] Removing 0 grants
2019-02-19 07:50:44.603 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 07:50:44.673 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 07:50:44.674 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 07:50:44.675 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 07:50:44.675 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 07:50:44.676 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 07:50:44.921 +01:00 [DBG] Starting grant removal
2019-02-19 07:50:47.732 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 07:50:47.737 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 07:50:47.738 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 07:50:47.739 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 07:50:47.741 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 07:50:47.742 +01:00 [DBG] Error Url: /home/error
2019-02-19 07:50:47.747 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 07:51:05.333 +01:00 [DBG] Request path /.well-known/openid-configuration matched to endpoint type Discovery
2019-02-19 07:51:05.376 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryEndpoint
2019-02-19 07:51:05.380 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryEndpoint for /.well-known/openid-configuration
2019-02-19 07:51:05.389 +01:00 [DBG] Start discovery request
2019-02-19 07:51:07.591 +01:00 [DBG] Found ["openid","profile","role","offline_access","api1"] as all scopes in database
2019-02-19 07:51:08.058 +01:00 [DBG] Request path /.well-known/openid-configuration/jwks matched to endpoint type Discovery
2019-02-19 07:51:08.064 +01:00 [DBG] Endpoint enabled: Discovery, successfully created handler: IdentityServer4.Endpoints.DiscoveryKeyEndpoint
2019-02-19 07:51:08.066 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.DiscoveryKeyEndpoint for /.well-known/openid-configuration/jwks
2019-02-19 07:51:08.079 +01:00 [DBG] Start key discovery request
2019-02-19 07:51:08.348 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 07:51:08.365 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 07:51:08.367 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 07:51:08.381 +01:00 [DBG] Start authorize request
2019-02-19 07:51:08.401 +01:00 [DBG] No user present in authorize request
2019-02-19 07:51:08.413 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:09.091 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.113 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:09.125 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:09.130 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:09.229 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.333 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.359 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.370 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.413 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:09.449 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG8I0fBz2mizl8Gn62oxOM0DS8gTYrlGD1WhiO36xU_gpF1D2F5ZoyAPpW0Gd2mWaSG8xIYXh3ei1u5lnnEG0GuXNXO-Dn7w7iFyMqoeh4a-8Ifk2fuWuxGzQzMumRsPiSKksh8JlljIorYO51rAecedAF_Zp9Ii95OyEdl4gt33F83wSzjggrUqxPp8fFBqk-SPoziBjZ33tAxPISx6dtGLVdPRkH-_G7_PeJ-9gqZUaqglV57rGXH4tHRpTbGvrQzt2K9xT36QCjZSGPLAWZ9-79Kj-9f3QVRDcYgrTdqSQ","UiLocales":null,"Nonce":"636861558682167260.Y2YyYzllZDMtY2Q0OC00MGFhLTk3NjYtZGI0MmFlOWNhYTEyYzJjNDcyOWUtYTAwNy00NzllLWE1MGEtNjYyODBiMzNiOWUx","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861558682167260.Y2YyYzllZDMtY2Q0OC00MGFhLTk3NjYtZGI0MmFlOWNhYTEyYzJjNDcyOWUtYTAwNy00NzllLWE1MGEtNjYyODBiMzNiOWUx","state":"CfDJ8BIGocXdesZEnSaNciO7zeG8I0fBz2mizl8Gn62oxOM0DS8gTYrlGD1WhiO36xU_gpF1D2F5ZoyAPpW0Gd2mWaSG8xIYXh3ei1u5lnnEG0GuXNXO-Dn7w7iFyMqoeh4a-8Ifk2fuWuxGzQzMumRsPiSKksh8JlljIorYO51rAecedAF_Zp9Ii95OyEdl4gt33F83wSzjggrUqxPp8fFBqk-SPoziBjZ33tAxPISx6dtGLVdPRkH-_G7_PeJ-9gqZUaqglV57rGXH4tHRpTbGvrQzt2K9xT36QCjZSGPLAWZ9-79Kj-9f3QVRDcYgrTdqSQ","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 07:51:09.529 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 07:51:09.721 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:09.732 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.732 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:09.736 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:09.737 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:09.743 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.754 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.760 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:09.770 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:09.773 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:09.789 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:09.790 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:20.885 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 07:51:20.992 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:21.003 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.004 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:21.009 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:21.010 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:21.018 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.035 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.046 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.056 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.057 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:21.107 +01:00 [INF] {"Username":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKM6Q98N8TE:00000002","TimeStamp":"2019-02-19T06:51:21.0000000Z","ProcessId":8180,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-19 07:51:21.114 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:51:21.120 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.130 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:51:21.132 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:51:21.133 +01:00 [DBG] No PKCE used.
2019-02-19 07:51:21.143 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.156 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.173 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:51:21.183 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:51:21.186 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 07:51:21.198 +01:00 [DBG] mvc found in database: true
2019-02-19 07:51:21.203 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:59:17.386 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 07:59:26.847 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 07:59:26.888 +01:00 [DBG] mvc found in database: true
2019-02-19 07:59:26.888 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 07:59:26.892 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 07:59:26.893 +01:00 [DBG] No PKCE used.
2019-02-19 07:59:26.897 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:59:26.912 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:59:26.923 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 07:59:26.931 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 07:59:26.952 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:00:02.247 +01:00 [INF] {"Username":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Failure","EventType":"Failure","Id":1001,"Message":"invalid credentials","ActivityId":"0HLKM6Q98N8TH:00000001","TimeStamp":"2019-02-19T07:00:02.0000000Z","ProcessId":8180,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginFailureEvent"}
2019-02-19 08:00:02.254 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:00:02.275 +01:00 [DBG] mvc found in database: true
2019-02-19 08:00:02.276 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:00:02.296 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:00:02.298 +01:00 [DBG] No PKCE used.
2019-02-19 08:00:02.305 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:00:02.313 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:00:02.345 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:00:02.351 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:00:02.355 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:00:02.362 +01:00 [DBG] mvc found in database: true
2019-02-19 08:00:02.363 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:07:54.383 +01:00 [INF] Using the default authentication scheme Identity.Application for IdentityServer
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for authentication
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-in
2019-02-19 08:07:54.432 +01:00 [DBG] Using Identity.External as default ASP.NET Core scheme for sign-out
2019-02-19 08:07:54.433 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for challenge
2019-02-19 08:07:54.434 +01:00 [DBG] Using Identity.Application as default ASP.NET Core scheme for forbid
2019-02-19 08:07:54.701 +01:00 [DBG] Starting grant removal
2019-02-19 08:07:58.881 +01:00 [DBG] Login Url: /Account/Login
2019-02-19 08:07:58.891 +01:00 [DBG] Login Return Url Parameter: ReturnUrl
2019-02-19 08:07:58.893 +01:00 [DBG] Logout Url: /Account/Logout
2019-02-19 08:07:58.894 +01:00 [DBG] ConsentUrl Url: /consent
2019-02-19 08:07:58.897 +01:00 [DBG] Consent Return Url Parameter: returnUrl
2019-02-19 08:07:58.899 +01:00 [DBG] Error Url: /home/error
2019-02-19 08:07:58.900 +01:00 [DBG] Error Id Parameter: errorId
2019-02-19 08:08:27.683 +01:00 [DBG] Request path /connect/authorize matched to endpoint type Authorize
2019-02-19 08:08:27.757 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeEndpoint
2019-02-19 08:08:27.759 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeEndpoint for /connect/authorize
2019-02-19 08:08:27.771 +01:00 [DBG] Start authorize request
2019-02-19 08:08:27.794 +01:00 [DBG] No user present in authorize request
2019-02-19 08:08:27.835 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:31.468 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:31.496 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:31.513 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:31.518 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:31.692 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.025 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.060 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.079 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.108 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:32.139 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"anonymous","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":null,"Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:08:32.189 +01:00 [INF] Showing login: User is not authenticated
2019-02-19 08:08:32.346 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:32.356 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:32.357 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:32.360 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:32.362 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:32.370 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.380 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.388 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:32.398 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:32.400 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:32.434 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:32.457 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:44.626 +01:00 [DBG] CORS request made for path: /Account/Login from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 08:08:46.725 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:08:46.733 +01:00 [DBG] mvc found in database: true
2019-02-19 08:08:46.734 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:08:46.736 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:08:46.737 +01:00 [DBG] No PKCE used.
2019-02-19 08:08:46.743 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:46.754 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:46.761 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:08:46.772 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:08:46.773 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:08:59.574 +01:00 [INF] {"Username":"Administrator","Provider":null,"ProviderUserId":null,"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","DisplayName":"Administrator","Endpoint":"UI","Category":"Authentication","Name":"User Login Success","EventType":"Success","Id":1000,"Message":null,"ActivityId":"0HLKM73S7BNFB:00000002","TimeStamp":"2019-02-19T07:08:59.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"UserLoginSuccessEvent"}
2019-02-19 08:09:08.515 +01:00 [DBG] Augmenting SignInContext
2019-02-19 08:09:08.519 +01:00 [DBG] Adding idp claim with value: local
2019-02-19 08:09:08.520 +01:00 [DBG] Adding amr claim with value: pwd
2019-02-19 08:09:08.538 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 08:09:12.884 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:12.887 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.589 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 08:09:19.592 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 08:09:19.598 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 08:09:19.627 +01:00 [DBG] Start authorize callback request
2019-02-19 08:09:19.637 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:19.656 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:19.666 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.672 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.679 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:19.681 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:19.687 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.696 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.702 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.710 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.711 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:19.713 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f683f9d6155c08c3ad24082c3db3c973","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:09:19.794 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 08:09:19.795 +01:00 [INF] Showing consent: User has not yet consented
2019-02-19 08:09:19.891 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:19.897 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.897 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.899 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:19.901 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:19.918 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.926 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.929 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:19.935 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:19.937 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:19.943 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:19.944 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:19.949 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:19.957 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.322 +01:00 [DBG] CORS request made for path: /consent from origin: null but was ignored because path was not for an allowed IdentityServer CORS endpoint
2019-02-19 08:09:35.386 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:35.393 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.394 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.395 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:35.407 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:35.413 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.423 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.447 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.458 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.460 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:35.464 +01:00 [INF] {"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RequestedScopes":["openid","profile","role","offline_access","api1"],"GrantedScopes":["openid","profile","role","offline_access","api1","offline_access"],"ConsentRemembered":true,"Category":"Grants","Name":"Consent granted","EventType":"Information","Id":4000,"Message":null,"ActivityId":"0HLKM73S7BNFC:00000004","TimeStamp":"2019-02-19T07:09:35.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"ConsentGrantedEvent"}
2019-02-19 08:09:35.534 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.534 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.542 +01:00 [DBG] Request path /connect/authorize/callback matched to endpoint type Authorize
2019-02-19 08:09:35.545 +01:00 [DBG] Endpoint enabled: Authorize, successfully created handler: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint
2019-02-19 08:09:35.552 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.AuthorizeCallbackEndpoint for /connect/authorize/callback
2019-02-19 08:09:35.554 +01:00 [DBG] Start authorize callback request
2019-02-19 08:09:35.566 +01:00 [DBG] User in authorize request: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:35.567 +01:00 [DBG] Start authorize request protocol validation
2019-02-19 08:09:35.578 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:35.579 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:35.582 +01:00 [DBG] Checking for PKCE parameters
2019-02-19 08:09:35.583 +01:00 [DBG] No PKCE used.
2019-02-19 08:09:35.589 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.600 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.608 +01:00 [DBG] Found ["openid","profile","role"] identity scopes in database
2019-02-19 08:09:35.623 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:35.625 +01:00 [DBG] Calling into custom validator: IdentityServer4.Validation.DefaultCustomAuthorizeRequestValidator
2019-02-19 08:09:35.628 +01:00 [INF] ValidatedAuthorizeRequest
{"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","AllowedRedirectUris":["http://localhost/Client/signin-oidc"],"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ResponseType":"code id_token","ResponseMode":"form_post","GrantType":"hybrid","RequestedScopes":"openid profile role offline_access api1","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","UiLocales":null,"Nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","AuthenticationContextReferenceClasses":null,"DisplayMode":null,"PromptMode":null,"MaxAge":null,"LoginHint":null,"SessionId":"f683f9d6155c08c3ad24082c3db3c973","Raw":{"client_id":"mvc","redirect_uri":"http://localhost/Client/signin-oidc","response_type":"code id_token","scope":"openid profile role offline_access api1","response_mode":"form_post","nonce":"636861569076501550.MmMxMjZjN2ItZjM4My00NWMwLTliMDMtYjM2NmZhNzIyNzAwMThhNmZhOGEtOTFmNC00NWNlLTlhYTktNGZjYzY0ODMxM2Jm","state":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","x-client-SKU":"ID_NETSTANDARD2_0","x-client-ver":"5.3.0.0"},"$type":"AuthorizeRequestValidationLog"}
2019-02-19 08:09:35.678 +01:00 [DBG] Scopes contains offline_access, consent is required
2019-02-19 08:09:35.692 +01:00 [INF] User consented to scopes: ["openid","profile","role","offline_access","api1","offline_access"]
2019-02-19 08:09:35.699 +01:00 [DBG] User indicated to remember consent for scopes: ["openid","profile","role","api1","offline_access"]
2019-02-19 08:09:35.707 +01:00 [DBG] Client allows remembering consent, and consent given. Updating consent store for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:35.787 +01:00 [DBG] WfeEXMhCrmrbscMhjWKNDX5rVCIzi6X/6cNort4YqpU= not found in database
2019-02-19 08:09:35.929 +01:00 [DBG] Creating Hybrid Flow response.
2019-02-19 08:09:35.973 +01:00 [DBG] qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= not found in database
2019-02-19 08:09:35.994 +01:00 [DBG] Creating Implicit Flow response.
2019-02-19 08:09:36.009 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 08:09:36.017 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 08:09:36.159 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":"http://localhost/Client/signin-oidc","Endpoint":"Authorize","SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","Scopes":"openid profile role api1 offline_access","GrantType":"hybrid","Tokens":[{"TokenType":"id_token","TokenValue":"****tXOw","$type":"Token"},{"TokenType":"code","TokenValue":"****dd2d","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKM73S7BNFC:00000005","TimeStamp":"2019-02-19T07:09:36.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 08:09:36.181 +01:00 [INF] Authorize endpoint response
{"SubjectId":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","ClientId":"mvc","RedirectUri":"http://localhost/Client/signin-oidc","State":"CfDJ8BIGocXdesZEnSaNciO7zeG5R6NQ7-atzP3UMPNuifs0vxWND1KZnm3zJjBOEyI6rrHqboEAm4QkgUQYhUDqVaXKFWmX8qaiSaBV0VpMqd3DlAPIgPDavlXd1pm6UfFuei_6XYjdVMcWxebvBGM0-4KjtQ-HU49t8DkHUtQrAGaH4Cj8fQzpReqQA1IlmqIFLVi0s9q2VGUPEA6cw9gSP0s-nexwfsG4gVwOY8Ldprvzzp0AKysYf-p4bZRlbJOWS3PW42o2OD9ve1PDum8ZKwbONaHDUGkW1abN82URO2X91XqtHqWowd59XWjnGDg2CA","Scope":"openid profile role api1 offline_access","Error":null,"ErrorDescription":null,"$type":"AuthorizeResponseLog"}
2019-02-19 08:09:36.212 +01:00 [DBG] Augmenting SignInContext
2019-02-19 08:09:36.214 +01:00 [INF] AuthenticationScheme: Identity.Application signed in.
2019-02-19 08:09:36.665 +01:00 [DBG] Request path /connect/token matched to endpoint type Token
2019-02-19 08:09:36.677 +01:00 [DBG] Endpoint enabled: Token, successfully created handler: IdentityServer4.Endpoints.TokenEndpoint
2019-02-19 08:09:36.679 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.TokenEndpoint for /connect/token
2019-02-19 08:09:36.694 +01:00 [DBG] Start token request.
2019-02-19 08:09:36.708 +01:00 [DBG] Start client validation
2019-02-19 08:09:36.716 +01:00 [DBG] Start parsing Basic Authentication secret
2019-02-19 08:09:36.726 +01:00 [DBG] Start parsing for secret in post body
2019-02-19 08:09:36.731 +01:00 [DBG] Parser found secret: PostBodySecretParser
2019-02-19 08:09:36.732 +01:00 [DBG] Secret id found: mvc
2019-02-19 08:09:36.741 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:36.742 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:36.758 +01:00 [DBG] Secret validator success: HashedSharedSecretValidator
2019-02-19 08:09:36.759 +01:00 [DBG] Client validation success
2019-02-19 08:09:36.760 +01:00 [INF] {"ClientId":"mvc","AuthenticationMethod":"SharedSecret","Category":"Authentication","Name":"Client Authentication Success","EventType":"Success","Id":1010,"Message":null,"ActivityId":"0HLKM73S7BNFD:00000001","TimeStamp":"2019-02-19T07:09:36.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"ClientAuthenticationSuccessEvent"}
2019-02-19 08:09:36.799 +01:00 [DBG] Start token request validation
2019-02-19 08:09:36.822 +01:00 [DBG] Start validation of authorization code token request
2019-02-19 08:09:36.848 +01:00 [DBG] qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= found in database: true
2019-02-19 08:09:36.888 +01:00 [DBG] removing qfUtZ6d3Myxfwr44dfcwlz/IlPeLawmGs5pc/UrcqFw= persisted grant from database
2019-02-19 08:09:36.935 +01:00 [DBG] Validation of authorization code token request success
2019-02-19 08:09:36.944 +01:00 [INF] Token request validation success
{"ClientId":"mvc","ClientName":"MVC Client","GrantType":"authorization_code","Scopes":null,"AuthorizationCode":"940b59035cdb825ef2010a3607154a7457267e843c1ddc96d9156482341cdd2d","RefreshToken":null,"UserName":null,"AuthenticationContextReferenceClasses":null,"Tenant":null,"IdP":null,"Raw":{"client_id":"mvc","client_secret":"***REDACTED***","code":"940b59035cdb825ef2010a3607154a7457267e843c1ddc96d9156482341cdd2d","grant_type":"authorization_code","redirect_uri":"http://localhost/Client/signin-oidc"},"$type":"TokenRequestValidationLog"}
2019-02-19 08:09:37.002 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.002 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.023 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.032 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:37.058 +01:00 [DBG] Getting claims for access token for client: mvc
2019-02-19 08:09:37.059 +01:00 [DBG] Getting claims for access token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a
2019-02-19 08:09:37.352 +01:00 [DBG] Creating refresh token
2019-02-19 08:09:37.353 +01:00 [DBG] Setting an absolute lifetime: 2592000
2019-02-19 08:09:37.393 +01:00 [DBG] cvKbM4/O1OrinlufmPYYtBj+lrBsKpUR+hjmTbYoUZQ= not found in database
2019-02-19 08:09:37.420 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.421 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.429 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.440 +01:00 [DBG] Found ["api1"] API scopes in database
2019-02-19 08:09:37.442 +01:00 [DBG] Getting claims for identity token for subject: e9414afc-f8d2-4b5b-a489-c3e1d6bb080a and client: mvc
2019-02-19 08:09:37.444 +01:00 [DBG] In addition to an id_token, an access_token was requested. No claims other than sub are included in the id_token. To obtain more user claims, either use the user info endpoint or set AlwaysIncludeUserClaimsInIdToken on the client configuration.
2019-02-19 08:09:37.472 +01:00 [INF] {"ClientId":"mvc","ClientName":"MVC Client","RedirectUri":null,"Endpoint":"Token","SubjectId":null,"Scopes":"openid profile role api1 offline_access","GrantType":"authorization_code","Tokens":[{"TokenType":"id_token","TokenValue":"****TPtA","$type":"Token"},{"TokenType":"refresh_token","TokenValue":"****b128","$type":"Token"},{"TokenType":"access_token","TokenValue":"****FBfw","$type":"Token"}],"Category":"Token","Name":"Token Issued Success","EventType":"Success","Id":2000,"Message":null,"ActivityId":"0HLKM73S7BNFD:00000001","TimeStamp":"2019-02-19T07:09:37.0000000Z","ProcessId":22552,"LocalIpAddress":"::1:3254","RemoteIpAddress":"::1","$type":"TokenIssuedSuccessEvent"}
2019-02-19 08:09:37.487 +01:00 [DBG] Token request success.
2019-02-19 08:09:37.605 +01:00 [DBG] Request path /connect/userinfo matched to endpoint type Userinfo
2019-02-19 08:09:37.611 +01:00 [DBG] Endpoint enabled: Userinfo, successfully created handler: IdentityServer4.Endpoints.UserInfoEndpoint
2019-02-19 08:09:37.613 +01:00 [INF] Invoking IdentityServer endpoint: IdentityServer4.Endpoints.UserInfoEndpoint for /connect/userinfo
2019-02-19 08:09:37.625 +01:00 [DBG] Start userinfo request
2019-02-19 08:09:37.630 +01:00 [DBG] Bearer token found in header
2019-02-19 08:09:37.720 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.721 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.737 +01:00 [DBG] mvc found in database: true
2019-02-19 08:09:37.738 +01:00 [DBG] client configuration validation for client mvc succeeded.
2019-02-19 08:09:37.750 +01:00 [DBG] Calling into custom token validator: IdentityServer4.Validation.DefaultCustomTokenValidator
2019-02-19 08:09:37.754 +01:00 [DBG] Token validation success
{"ClientId":null,"ClientName":null,"ValidateLifetime":true,"AccessTokenType":"Jwt","ExpectedScope":"openid","TokenHandle":null,"JwtId":null,"Claims":{"nbf":1550560177,"exp":1550563777,"iss":"http://localhost:3254","aud":["http://localhost:3254/resources","api1"],"client_id":"mvc","sub":"e9414afc-f8d2-4b5b-a489-c3e1d6bb080a","auth_time":1550560148,"idp":"local","scope":["openid","profile","role","offline_access","api1"],"amr":"pwd"},"$type":"TokenValidationLog"}
2019-02-19 08:09:37.795 +01:00 [DBG] Creating userinfo response
2019-02-19 08:09:37.800 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.806 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.814 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.817 +01:00 [DBG] Requested claim types: sub name family_name given_name middle_name nickname preferred_username profile picture website gender birthdate zoneinfo locale updated_at role offline_access
2019-02-19 08:09:37.818 +01:00 [DBG] Scopes in access token: openid profile role offline_access api1 offline_access
2019-02-19 08:09:37.838 +01:00 [DBG] Found ["openid","profile","role","offline_access"] identity scopes in database
2019-02-19 08:09:37.861 +01:00 [INF] Profile service returned the following claim types: sub role preferred_username name
2019-02-19 08:09:37.865 +01:00 [DBG] End userinfo request
